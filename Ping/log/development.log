Google geocoding. address: 140 Market St, San Francisco, CA, args []
Google geocoding. Result: %7B%0A+++%22results%22+%3A+%5B%0A++++++%7B%0A+++++++++%22address_components%22+%3A+%5B%0A++++++++++++%7B%0A+++++++++++++++%22long_name%22+%3A+%22140%22%2C%0A+++++++++++++++%22short_name%22+%3A+%22140%22%2C%0A+++++++++++++++%22types%22+%3A+%5B+%22street_number%22+%5D%0A++++++++++++%7D%2C%0A++++++++++++%7B%0A+++++++++++++++%22long_name%22+%3A+%22Market+Street%22%2C%0A+++++++++++++++%22short_name%22+%3A+%22Market+St%22%2C%0A+++++++++++++++%22types%22+%3A+%5B+%22route%22+%5D%0A++++++++++++%7D%2C%0A++++++++++++%7B%0A+++++++++++++++%22long_name%22+%3A+%22Financial+District%22%2C%0A+++++++++++++++%22short_name%22+%3A+%22Financial+District%22%2C%0A+++++++++++++++%22types%22+%3A+%5B+%22neighborhood%22%2C+%22political%22+%5D%0A++++++++++++%7D%2C%0A++++++++++++%7B%0A+++++++++++++++%22long_name%22+%3A+%22San+Francisco%22%2C%0A+++++++++++++++%22short_name%22+%3A+%22SF%22%2C%0A+++++++++++++++%22types%22+%3A+%5B+%22locality%22%2C+%22political%22+%5D%0A++++++++++++%7D%2C%0A++++++++++++%7B%0A+++++++++++++++%22long_name%22+%3A+%22San+Francisco+County%22%2C%0A+++++++++++++++%22short_name%22+%3A+%22San+Francisco+County%22%2C%0A+++++++++++++++%22types%22+%3A+%5B+%22administrative_area_level_2%22%2C+%22political%22+%5D%0A++++++++++++%7D%2C%0A++++++++++++%7B%0A+++++++++++++++%22long_name%22+%3A+%22California%22%2C%0A+++++++++++++++%22short_name%22+%3A+%22CA%22%2C%0A+++++++++++++++%22types%22+%3A+%5B+%22administrative_area_level_1%22%2C+%22political%22+%5D%0A++++++++++++%7D%2C%0A++++++++++++%7B%0A+++++++++++++++%22long_name%22+%3A+%22United+States%22%2C%0A+++++++++++++++%22short_name%22+%3A+%22US%22%2C%0A+++++++++++++++%22types%22+%3A+%5B+%22country%22%2C+%22political%22+%5D%0A++++++++++++%7D%2C%0A++++++++++++%7B%0A+++++++++++++++%22long_name%22+%3A+%2294105%22%2C%0A+++++++++++++++%22short_name%22+%3A+%2294105%22%2C%0A+++++++++++++++%22types%22+%3A+%5B+%22postal_code%22+%5D%0A++++++++++++%7D%0A+++++++++%5D%2C%0A+++++++++%22formatted_address%22+%3A+%22140+Market+St%2C+San+Francisco%2C+CA+94105%2C+USA%22%2C%0A+++++++++%22geometry%22+%3A+%7B%0A++++++++++++%22location%22+%3A+%7B%0A+++++++++++++++%22lat%22+%3A+37.793711%2C%0A+++++++++++++++%22lng%22+%3A+-122.3958948%0A++++++++++++%7D%2C%0A++++++++++++%22location_type%22+%3A+%22RANGE_INTERPOLATED%22%2C%0A++++++++++++%22viewport%22+%3A+%7B%0A+++++++++++++++%22northeast%22+%3A+%7B%0A++++++++++++++++++%22lat%22+%3A+37.7950599802915%2C%0A++++++++++++++++++%22lng%22+%3A+-122.3945458197085%0A+++++++++++++++%7D%2C%0A+++++++++++++++%22southwest%22+%3A+%7B%0A++++++++++++++++++%22lat%22+%3A+37.7923620197085%2C%0A++++++++++++++++++%22lng%22+%3A+-122.3972437802915%0A+++++++++++++++%7D%0A++++++++++++%7D%0A+++++++++%7D%2C%0A+++++++++%22place_id%22+%3A+%22EisxNDAgTWFya2V0IFN0LCBTYW4gRnJhbmNpc2NvLCBDQSA5NDEwNSwgVVNB%22%2C%0A+++++++++%22types%22+%3A+%5B+%22street_address%22+%5D%0A++++++%7D%0A+++%5D%2C%0A+++%22status%22+%3A+%22OK%22%0A%7D%0A
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20170916205329)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "facebook_id" varchar NOT NULL, "session_token" varchar NOT NULL, "location_id" integer, "visible_radius" integer DEFAULT 10 NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20170916205329"]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateFriendships (20170916205701)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "friendships" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "friend_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20170916205701"]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateLocations (20170916211509)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "locations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "latitude" decimal(15,10), "longitude" decimal(15,10), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_latitude" ON "locations" ("latitude")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_longitude" ON "locations" ("longitude")[0m
  [1m[35m (0.0ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_longitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_longitude' AND type='index'
[0m
  [1m[35m (0.0ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_latitude_and_longitude" ON "locations" ("latitude", "longitude")[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20170916211509"]]
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2017-09-16 21:35:46.909578"], ["updated_at", "2017-09-16 21:35:46.909578"]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_longitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_longitude' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude' AND type='index'
[0m
  [1m[36mLocation Load (0.9ms)[0m  [1m[34mSELECT "locations".* FROM "locations"[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "friendships"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "friendships" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "friend_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "locations"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "locations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "latitude" decimal(15,10), "longitude" decimal(15,10), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_latitude_and_longitude" ON "locations" ("latitude", "longitude")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_latitude" ON "locations" ("latitude")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_longitude" ON "locations" ("longitude")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "facebook_id" varchar NOT NULL, "session_token" varchar NOT NULL, "location_id" integer, "visible_radius" integer DEFAULT 10 NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "friendships"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "friendships" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "friend_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "locations"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "locations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "latitude" decimal(15,10), "longitude" decimal(15,10), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_latitude_and_longitude" ON "locations" ("latitude", "longitude")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_latitude" ON "locations" ("latitude")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_longitude" ON "locations" ("longitude")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "facebook_id" varchar NOT NULL, "session_token" varchar NOT NULL, "location_id" integer, "visible_radius" integer DEFAULT 10 NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170916211509)[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20170916205329),
(20170916205701);

[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2017-09-16 22:01:17.322589"], ["updated_at", "2017-09-16 22:01:17.322589"]]
  [1m[35m (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mLocation Load (0.1ms)[0m  [1m[34mSELECT "locations".* FROM "locations"[0m
  [1m[36mFriendship Load (0.3ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "735 Minna"], ["latitude", 37.776521], ["longitude", -122.413125], ["created_at", "2017-09-16 22:01:17.351890"], ["updated_at", "2017-09-16 22:01:17.351890"]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "431 Tehma"], ["latitude", 37.78036], ["longitude", -122.405042], ["created_at", "2017-09-16 22:01:17.355146"], ["updated_at", "2017-09-16 22:01:17.355146"]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "1600 Ampitheater Parkway"], ["latitude", 37.421655], ["longitude", -122.085637], ["created_at", "2017-09-16 22:01:17.357136"], ["updated_at", "2017-09-16 22:01:17.357136"]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "location_id", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "1"], ["session_token", "abc"], ["location_id", 3], ["visible_radius", 15], ["created_at", "2017-09-16 22:01:17.365681"], ["updated_at", "2017-09-16 22:01:17.365681"]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "location_id", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "2"], ["session_token", "def"], ["location_id", 1], ["visible_radius", 15], ["created_at", "2017-09-16 22:01:17.367889"], ["updated_at", "2017-09-16 22:01:17.367889"]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "location_id", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "3"], ["session_token", "ghi"], ["location_id", 2], ["visible_radius", 15], ["created_at", "2017-09-16 22:01:17.369594"], ["updated_at", "2017-09-16 22:01:17.369594"]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35m (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ?[0m  [["user_id", 3]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mLocation Load (0.1ms)[0m  [1m[34mSELECT "locations".* FROM "locations"[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 1]]
  [1m[35m (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 2]]
  [1m[35m (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 3]]
  [1m[35m (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships"[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "735 Minna"], ["latitude", 37.776521], ["longitude", -122.413125], ["created_at", "2017-09-16 22:01:32.514609"], ["updated_at", "2017-09-16 22:01:32.514609"]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "431 Tehma"], ["latitude", 37.78036], ["longitude", -122.405042], ["created_at", "2017-09-16 22:01:32.516613"], ["updated_at", "2017-09-16 22:01:32.516613"]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "1600 Ampitheater Parkway"], ["latitude", 37.421655], ["longitude", -122.085637], ["created_at", "2017-09-16 22:01:32.518622"], ["updated_at", "2017-09-16 22:01:32.518622"]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "location_id", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "1"], ["session_token", "abc"], ["location_id", 6], ["visible_radius", 15], ["created_at", "2017-09-16 22:01:32.520582"], ["updated_at", "2017-09-16 22:01:32.520582"]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "location_id", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "2"], ["session_token", "def"], ["location_id", 4], ["visible_radius", 15], ["created_at", "2017-09-16 22:01:32.522495"], ["updated_at", "2017-09-16 22:01:32.522495"]]
  [1m[35m (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "location_id", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "3"], ["session_token", "ghi"], ["location_id", 5], ["visible_radius", 15], ["created_at", "2017-09-16 22:01:32.524909"], ["updated_at", "2017-09-16 22:01:32.524909"]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ?[0m  [["user_id", 4]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 4]]
  [1m[35m (2.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ?[0m  [["user_id", 5]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 5]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ?[0m  [["user_id", 6]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 6]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations"[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 4]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 5]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 6]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "735 Minna"], ["latitude", 37.776521], ["longitude", -122.413125], ["created_at", "2017-09-16 22:03:31.432011"], ["updated_at", "2017-09-16 22:03:31.432011"]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "431 Tehma"], ["latitude", 37.78036], ["longitude", -122.405042], ["created_at", "2017-09-16 22:03:31.434173"], ["updated_at", "2017-09-16 22:03:31.434173"]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "1600 Ampitheater Parkway"], ["latitude", 37.421655], ["longitude", -122.085637], ["created_at", "2017-09-16 22:03:31.436271"], ["updated_at", "2017-09-16 22:03:31.436271"]]
  [1m[35m (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "location_id", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "1"], ["session_token", "abc"], ["location_id", 9], ["visible_radius", 15], ["created_at", "2017-09-16 22:03:31.438857"], ["updated_at", "2017-09-16 22:03:31.438857"]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "location_id", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "2"], ["session_token", "def"], ["location_id", 7], ["visible_radius", 15], ["created_at", "2017-09-16 22:03:31.441401"], ["updated_at", "2017-09-16 22:03:31.441401"]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "location_id", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "3"], ["session_token", "ghi"], ["location_id", 8], ["visible_radius", 15], ["created_at", "2017-09-16 22:03:31.443843"], ["updated_at", "2017-09-16 22:03:31.443843"]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 7], ["friend_id", 9], ["created_at", "2017-09-16 22:03:31.456349"], ["updated_at", "2017-09-16 22:03:31.456349"]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 9], ["friend_id", 7], ["created_at", "2017-09-16 22:03:31.459554"], ["updated_at", "2017-09-16 22:03:31.459554"]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 8], ["friend_id", 9], ["created_at", "2017-09-16 22:03:31.462723"], ["updated_at", "2017-09-16 22:03:31.462723"]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 9], ["friend_id", 8], ["created_at", "2017-09-16 22:03:31.466091"], ["updated_at", "2017-09-16 22:03:31.466091"]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 7]]
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations"[0m
  [1m[36mLocation Load (0.3ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mLocation Load (0.1ms)[0m  [1m[34mSELECT "locations".* FROM "locations"[0m
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations"[0m
  [1m[36mLocation Load (1.1ms)[0m  [1m[34mSELECT "locations".* FROM "locations"[0m
  [1m[36mLocation Load (0.5ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddUsernameandPhoto (20170916222121)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "name" varchar[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ADD "pro_pic_url" varchar[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20170916222121"]]
  [1m[35m (2.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_longitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_longitude' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "friendships"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "friendships" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "friend_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (9.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "locations"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "locations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "latitude" decimal(15,10), "longitude" decimal(15,10), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_latitude_and_longitude" ON "locations" ("latitude", "longitude")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_latitude" ON "locations" ("latitude")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_longitude" ON "locations" ("longitude")[0m
  [1m[35m (1.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "facebook_id" varchar NOT NULL, "session_token" varchar NOT NULL, "location_id" integer, "visible_radius" integer DEFAULT 10 NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "name" varchar, "pro_pic_url" varchar)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "friendships"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "friendships" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "friend_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "locations"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "locations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "latitude" decimal(15,10), "longitude" decimal(15,10), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_latitude_and_longitude" ON "locations" ("latitude", "longitude")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_latitude" ON "locations" ("latitude")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_longitude" ON "locations" ("longitude")[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "facebook_id" varchar NOT NULL, "session_token" varchar NOT NULL, "location_id" integer, "visible_radius" integer DEFAULT 10 NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "name" varchar, "pro_pic_url" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170916222121)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations"[0m
  [1m[36mFriendship Load (0.5ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "735 Minna"], ["latitude", 37.776521], ["longitude", -122.413125], ["created_at", "2017-09-16 23:00:41.536912"], ["updated_at", "2017-09-16 23:00:41.536912"]]
  [1m[35m (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "431 Tehma"], ["latitude", 37.78036], ["longitude", -122.405042], ["created_at", "2017-09-16 23:00:41.540165"], ["updated_at", "2017-09-16 23:00:41.540165"]]
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "1600 Ampitheater Parkway"], ["latitude", 37.421655], ["longitude", -122.085637], ["created_at", "2017-09-16 23:00:41.543561"], ["updated_at", "2017-09-16 23:00:41.543561"]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "location_id", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "1"], ["session_token", "abc"], ["location_id", 3], ["visible_radius", 15], ["created_at", "2017-09-16 23:00:41.555104"], ["updated_at", "2017-09-16 23:00:41.555104"]]
  [1m[35m (3.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "location_id", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "2"], ["session_token", "def"], ["location_id", 1], ["visible_radius", 15], ["created_at", "2017-09-16 23:00:41.562232"], ["updated_at", "2017-09-16 23:00:41.562232"]]
  [1m[35m (1.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "location_id", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "3"], ["session_token", "ghi"], ["location_id", 2], ["visible_radius", 15], ["created_at", "2017-09-16 23:00:41.566231"], ["updated_at", "2017-09-16 23:00:41.566231"]]
  [1m[35m (3.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["friend_id", 3], ["created_at", "2017-09-16 23:00:41.586054"], ["updated_at", "2017-09-16 23:00:41.586054"]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 3], ["friend_id", 1], ["created_at", "2017-09-16 23:00:41.594059"], ["updated_at", "2017-09-16 23:00:41.594059"]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 2], ["friend_id", 3], ["created_at", "2017-09-16 23:00:41.600092"], ["updated_at", "2017-09-16 23:00:41.600092"]]
  [1m[35m (3.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 3], ["friend_id", 2], ["created_at", "2017-09-16 23:00:41.607815"], ["updated_at", "2017-09-16 23:00:41.607815"]]
  [1m[35m (1.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2017-09-16 16:01:36 -0700
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/tommy/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/railties-5.1.4/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/tommy/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/railties-5.1.4/lib/rails/templates/rails/welcome/index.html.erb (3.6ms)
Completed 200 OK in 12ms (Views: 9.3ms | ActiveRecord: 0.0ms)


Started POST "/users?facebook_id=pizza&session_token=pizza" for 127.0.0.1 at 2017-09-16 16:03:34 -0700
  
ActionController::RoutingError (No route matches [POST] "/users"):
  
actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/method_override.rb:22:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.1.4) lib/rails/engine.rb:522:in `call'
puma (3.10.0) lib/puma/configuration.rb:225:in `call'
puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
puma (3.10.0) lib/puma/server.rb:437:in `process_client'
puma (3.10.0) lib/puma/server.rb:301:in `block in run'
puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started POST "/api/user?facebook_id=pizza&session_token=pizza" for 127.0.0.1 at 2017-09-16 16:04:02 -0700
  
ActionController::RoutingError (uninitialized constant Api):
  
activesupport (5.1.4) lib/active_support/inflector/methods.rb:269:in `const_get'
activesupport (5.1.4) lib/active_support/inflector/methods.rb:269:in `block in constantize'
activesupport (5.1.4) lib/active_support/inflector/methods.rb:267:in `each'
activesupport (5.1.4) lib/active_support/inflector/methods.rb:267:in `inject'
activesupport (5.1.4) lib/active_support/inflector/methods.rb:267:in `constantize'
actionpack (5.1.4) lib/action_dispatch/http/request.rb:85:in `controller_class_for'
actionpack (5.1.4) lib/action_dispatch/http/request.rb:78:in `controller_class'
actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:43:in `controller'
actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:29:in `serve'
actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `each'
actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
rack (2.0.3) lib/rack/etag.rb:25:in `call'
rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.3) lib/rack/head.rb:12:in `call'
rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/method_override.rb:22:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.1.4) lib/rails/engine.rb:522:in `call'
puma (3.10.0) lib/puma/configuration.rb:225:in `call'
puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
puma (3.10.0) lib/puma/server.rb:437:in `process_client'
puma (3.10.0) lib/puma/server.rb:301:in `block in run'
puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/api/user?facebook_id=pizza&session_token=pizza" for 127.0.0.1 at 2017-09-16 16:05:54 -0700
  
ActionController::RoutingError (No route matches [GET] "/api/user"):
  
actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/method_override.rb:22:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.1.4) lib/rails/engine.rb:522:in `call'
puma (3.10.0) lib/puma/configuration.rb:225:in `call'
puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
puma (3.10.0) lib/puma/server.rb:437:in `process_client'
puma (3.10.0) lib/puma/server.rb:301:in `block in run'
puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/api/user?facebook_id=pizza&session_token=pizza" for 127.0.0.1 at 2017-09-16 16:06:51 -0700
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [GET] "/api/user"):
  
actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/method_override.rb:22:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.1.4) lib/rails/engine.rb:522:in `call'
puma (3.10.0) lib/puma/configuration.rb:225:in `call'
puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
puma (3.10.0) lib/puma/server.rb:437:in `process_client'
puma (3.10.0) lib/puma/server.rb:301:in `block in run'
puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/api/user?facebook_id=pizza&session_token=pizza" for 127.0.0.1 at 2017-09-16 16:06:57 -0700
  
ActionController::RoutingError (No route matches [GET] "/api/user"):
  
actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/method_override.rb:22:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.1.4) lib/rails/engine.rb:522:in `call'
puma (3.10.0) lib/puma/configuration.rb:225:in `call'
puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
puma (3.10.0) lib/puma/server.rb:437:in `process_client'
puma (3.10.0) lib/puma/server.rb:301:in `block in run'
puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/api/user?facebook_id=pizza&session_token=pizza" for 127.0.0.1 at 2017-09-16 16:07:42 -0700
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [GET] "/api/user"):
  
actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/method_override.rb:22:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.1.4) lib/rails/engine.rb:522:in `call'
puma (3.10.0) lib/puma/configuration.rb:225:in `call'
puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
puma (3.10.0) lib/puma/server.rb:437:in `process_client'
puma (3.10.0) lib/puma/server.rb:301:in `block in run'
puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/api/user?facebook_id=pizza&session_token=pizza" for 127.0.0.1 at 2017-09-16 16:07:47 -0700
  
ActionController::RoutingError (No route matches [GET] "/api/user"):
  
actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/method_override.rb:22:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.1.4) lib/rails/engine.rb:522:in `call'
puma (3.10.0) lib/puma/configuration.rb:225:in `call'
puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
puma (3.10.0) lib/puma/server.rb:437:in `process_client'
puma (3.10.0) lib/puma/server.rb:301:in `block in run'
puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started POST "/api/user?facebook_id=pizza&session_token=pizza" for 127.0.0.1 at 2017-09-16 16:08:34 -0700

NameError - uninitialized constant Api:
  activesupport (5.1.4) lib/active_support/dependencies.rb:549:in `load_missing_constant'
  activesupport (5.1.4) lib/active_support/dependencies.rb:202:in `const_missing'
  activesupport (5.1.4) lib/active_support/inflector/methods.rb:269:in `block in constantize'
  activesupport (5.1.4) lib/active_support/inflector/methods.rb:267:in `constantize'
  activesupport (5.1.4) lib/active_support/dependencies.rb:582:in `get'
  activesupport (5.1.4) lib/active_support/dependencies.rb:613:in `constantize'
  actionpack (5.1.4) lib/action_dispatch/http/request.rb:85:in `controller_class_for'
  actionpack (5.1.4) lib/action_dispatch/http/request.rb:78:in `controller_class'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:43:in `controller'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:29:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/user?facebook_id=pizza&session_token=pizza" for 127.0.0.1 at 2017-09-16 16:09:28 -0700
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m

NameError - uninitialized constant Api:
  activesupport (5.1.4) lib/active_support/dependencies.rb:549:in `load_missing_constant'
  activesupport (5.1.4) lib/active_support/dependencies.rb:202:in `const_missing'
  activesupport (5.1.4) lib/active_support/inflector/methods.rb:269:in `block in constantize'
  activesupport (5.1.4) lib/active_support/inflector/methods.rb:267:in `constantize'
  activesupport (5.1.4) lib/active_support/dependencies.rb:582:in `get'
  activesupport (5.1.4) lib/active_support/dependencies.rb:613:in `constantize'
  actionpack (5.1.4) lib/action_dispatch/http/request.rb:85:in `controller_class_for'
  actionpack (5.1.4) lib/action_dispatch/http/request.rb:78:in `controller_class'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:43:in `controller'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:29:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/user?facebook_id=pizza&session_token=pizza" for 127.0.0.1 at 2017-09-16 16:09:30 -0700

NameError - uninitialized constant Api:
  activesupport (5.1.4) lib/active_support/dependencies.rb:549:in `load_missing_constant'
  activesupport (5.1.4) lib/active_support/dependencies.rb:202:in `const_missing'
  activesupport (5.1.4) lib/active_support/inflector/methods.rb:269:in `block in constantize'
  activesupport (5.1.4) lib/active_support/inflector/methods.rb:267:in `constantize'
  activesupport (5.1.4) lib/active_support/dependencies.rb:582:in `get'
  activesupport (5.1.4) lib/active_support/dependencies.rb:613:in `constantize'
  actionpack (5.1.4) lib/action_dispatch/http/request.rb:85:in `controller_class_for'
  actionpack (5.1.4) lib/action_dispatch/http/request.rb:78:in `controller_class'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:43:in `controller'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:29:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/user?facebook_id=pizza&session_token=pizza" for 127.0.0.1 at 2017-09-16 16:16:03 -0700

NameError - uninitialized constant Api::UserController:
  activesupport (5.1.4) lib/active_support/dependencies.rb:549:in `load_missing_constant'
  activesupport (5.1.4) lib/active_support/dependencies.rb:202:in `const_missing'
  activesupport (5.1.4) lib/active_support/inflector/methods.rb:271:in `block in constantize'
  activesupport (5.1.4) lib/active_support/inflector/methods.rb:267:in `constantize'
  activesupport (5.1.4) lib/active_support/dependencies.rb:582:in `get'
  activesupport (5.1.4) lib/active_support/dependencies.rb:613:in `constantize'
  actionpack (5.1.4) lib/action_dispatch/http/request.rb:85:in `controller_class_for'
  actionpack (5.1.4) lib/action_dispatch/http/request.rb:78:in `controller_class'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:43:in `controller'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:29:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/user?facebook_id=pizza&session_token=pizza" for 127.0.0.1 at 2017-09-16 16:18:29 -0700
  
ActionController::RoutingError (No route matches [POST] "/api/user"):
  
actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/method_override.rb:22:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.1.4) lib/rails/engine.rb:522:in `call'
puma (3.10.0) lib/puma/configuration.rb:225:in `call'
puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
puma (3.10.0) lib/puma/server.rb:437:in `process_client'
puma (3.10.0) lib/puma/server.rb:301:in `block in run'
puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started POST "/api/users?facebook_id=pizza&session_token=pizza" for 127.0.0.1 at 2017-09-16 16:18:40 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"facebook_id"=>"pizza", "session_token"=>"pizza"}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 1ms



ActionController::InvalidAuthenticityToken - ActionController::InvalidAuthenticityToken:
  actionpack (5.1.4) lib/action_controller/metal/request_forgery_protection.rb:195:in `handle_unverified_request'
  actionpack (5.1.4) lib/action_controller/metal/request_forgery_protection.rb:227:in `handle_unverified_request'
  actionpack (5.1.4) lib/action_controller/metal/request_forgery_protection.rb:222:in `verify_authenticity_token'
  activesupport (5.1.4) lib/active_support/callbacks.rb:413:in `block in make_lambda'
  activesupport (5.1.4) lib/active_support/callbacks.rb:197:in `block (2 levels) in halting'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:12:in `block (2 levels) in <module:Callbacks>'
  activesupport (5.1.4) lib/active_support/callbacks.rb:198:in `block in halting'
  activesupport (5.1.4) lib/active_support/callbacks.rb:507:in `block in invoke_before'
  activesupport (5.1.4) lib/active_support/callbacks.rb:507:in `invoke_before'
  activesupport (5.1.4) lib/active_support/callbacks.rb:130:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?facebook_id=pizza&session_token=pizza" for 127.0.0.1 at 2017-09-16 16:18:55 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"facebook_id"=>"pizza", "session_token"=>"pizza"}
Completed 400 Bad Request in 9ms



ActionController::ParameterMissing - param is missing or the value is empty: user:
  actionpack (5.1.4) lib/action_controller/metal/strong_parameters.rb:437:in `require'
  app/controllers/api/users_controller.rb:18:in `user_params'
  app/controllers/api/users_controller.rb:3:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?facebook_id=pizza&session_token=pizza" for 127.0.0.1 at 2017-09-16 16:18:57 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"facebook_id"=>"pizza", "session_token"=>"pizza"}
Completed 400 Bad Request in 1ms



ActionController::ParameterMissing - param is missing or the value is empty: user:
  actionpack (5.1.4) lib/action_controller/metal/strong_parameters.rb:437:in `require'
  app/controllers/api/users_controller.rb:18:in `user_params'
  app/controllers/api/users_controller.rb:3:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?facebook_id=pizza&session_token=pizza" for 127.0.0.1 at 2017-09-16 16:19:48 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"facebook_id"=>"pizza", "session_token"=>"pizza"}
Completed 400 Bad Request in 3ms



ActionController::ParameterMissing - param is missing or the value is empty: user:
  actionpack (5.1.4) lib/action_controller/metal/strong_parameters.rb:437:in `require'
  app/controllers/api/users_controller.rb:19:in `user_params'
  app/controllers/api/users_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?facebook_id=pizza&session_token=pizza" for 127.0.0.1 at 2017-09-16 16:20:19 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"facebook_id"=>"pizza", "session_token"=>"pizza"}
Completed 400 Bad Request in 1ms



ActionController::ParameterMissing - param is missing or the value is empty: user:
  actionpack (5.1.4) lib/action_controller/metal/strong_parameters.rb:437:in `require'
  app/controllers/api/users_controller.rb:20:in `user_params'
  app/controllers/api/users_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?facebook_id=pizza&session_token=pizza" for 127.0.0.1 at 2017-09-16 16:20:54 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"facebook_id"=>"pizza", "session_token"=>"pizza"}
Completed 400 Bad Request in 1ms



ActionController::ParameterMissing - param is missing or the value is empty: user:
  actionpack (5.1.4) lib/action_controller/metal/strong_parameters.rb:437:in `require'
  app/controllers/api/users_controller.rb:20:in `user_params'
  app/controllers/api/users_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?user[facebook_id]=pizza&user[session_token]=pizza" for 127.0.0.1 at 2017-09-16 16:21:15 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"facebook_id"=>"pizza", "session_token"=>"pizza"}}
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["facebook_id", "pizza"], ["session_token", "pizza"], ["visible_radius", 5], ["created_at", "2017-09-16 23:21:15.797971"], ["updated_at", "2017-09-16 23:21:15.797971"]]
  [1m[35m (2.1ms)[0m  [1m[36mcommit transaction[0m
Completed 500 Internal Server Error in 18ms (ActiveRecord: 3.2ms)



ActionView::MissingTemplate - Missing template api/users/create, application/create with {:locale=>[:en], :formats=>[:json], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :coffee, :jbuilder]}. Searched in:
  * "/Users/tommy/Desktop/ping-backend/Ping/app/views"
:
  actionview (5.1.4) lib/action_view/path_set.rb:46:in `find'
  actionview (5.1.4) lib/action_view/lookup_context.rb:116:in `find'
  actionview (5.1.4) lib/action_view/renderer/abstract_renderer.rb:18:in `find_template'
  actionview (5.1.4) lib/action_view/renderer/template_renderer.rb:38:in `determine_template'
  actionview (5.1.4) lib/action_view/renderer/template_renderer.rb:8:in `render'
  actionview (5.1.4) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.1.4) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.1.4) lib/action_view/rendering.rb:103:in `_render_template'
  actionpack (5.1.4) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.1.4) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.1.4) lib/action_controller/metal/renderers.rb:141:in `render_to_body'
  actionpack (5.1.4) lib/abstract_controller/rendering.rb:24:in `render'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.1.4) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/tommy/.rbenv/versions/2.3.1/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.1.4) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:29:in `cleanup_view_runtime'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:43:in `render'
  app/controllers/api/users_controller.rb:11:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Started POST "/api/users?user[facebook_id]=pizza&user[session_token]=pizza" for 127.0.0.1 at 2017-09-16 16:22:17 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"facebook_id"=>"pizza", "session_token"=>"pizza"}}
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["facebook_id", "pizza"], ["session_token", "pizza"], ["visible_radius", 5], ["created_at", "2017-09-16 23:22:17.190098"], ["updated_at", "2017-09-16 23:22:17.190098"]]
  [1m[35m (2.3ms)[0m  [1m[36mcommit transaction[0m
  Rendering api/users/show.json.jbuilder
  Rendered api/users/_user.json.jbuilder (13.5ms)
  Rendered api/users/show.json.jbuilder (14.4ms)
Completed 500 Internal Server Error in 32ms (ActiveRecord: 3.1ms)



NoMethodError - undefined method `user_name' for #<User:0x007fd85cea5df8>:
  activemodel (5.1.4) lib/active_model/attribute_methods.rb:432:in `method_missing'
  jbuilder (2.7.0) lib/jbuilder.rb:260:in `block in _extract_method_values'
  jbuilder (2.7.0) lib/jbuilder.rb:260:in `_extract_method_values'
  jbuilder (2.7.0) lib/jbuilder.rb:219:in `extract!'
  app/views/api/users/_user.json.jbuilder:1:in `_app_views_api_users__user_json_jbuilder___3276884901896839751_70283656576180'
  actionview (5.1.4) lib/action_view/template.rb:157:in `block in render'
  activesupport (5.1.4) lib/active_support/notifications.rb:168:in `instrument'
  actionview (5.1.4) lib/action_view/template.rb:352:in `instrument_render_template'
  actionview (5.1.4) lib/action_view/template.rb:155:in `render'
  actionview (5.1.4) lib/action_view/renderer/partial_renderer.rb:342:in `block in render_partial'
  actionview (5.1.4) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.1.4) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.1.4) lib/action_view/renderer/partial_renderer.rb:331:in `render_partial'
  actionview (5.1.4) lib/action_view/renderer/partial_renderer.rb:310:in `render'
  actionview (5.1.4) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.1.4) lib/action_view/renderer/renderer.rb:21:in `render'
  actionview (5.1.4) lib/action_view/helpers/rendering_helper.rb:32:in `render'
  jbuilder (2.7.0) lib/jbuilder/jbuilder_template.rb:128:in `_render_partial'
  jbuilder (2.7.0) lib/jbuilder/jbuilder_template.rb:122:in `_render_partial_with_options'
  jbuilder (2.7.0) lib/jbuilder/jbuilder_template.rb:215:in `_render_explicit_partial'
  jbuilder (2.7.0) lib/jbuilder/jbuilder_template.rb:22:in `partial!'
  app/views/api/users/show.json.jbuilder:1:in `_app_views_api_users_show_json_jbuilder___1012388731779382625_70283656540900'
  actionview (5.1.4) lib/action_view/template.rb:157:in `block in render'
  activesupport (5.1.4) lib/active_support/notifications.rb:168:in `instrument'
  actionview (5.1.4) lib/action_view/template.rb:352:in `instrument_render_template'
  actionview (5.1.4) lib/action_view/template.rb:155:in `render'
  actionview (5.1.4) lib/action_view/renderer/template_renderer.rb:52:in `block (2 levels) in render_template'
  actionview (5.1.4) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.1.4) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.1.4) lib/action_view/renderer/template_renderer.rb:51:in `block in render_template'
  actionview (5.1.4) lib/action_view/renderer/template_renderer.rb:59:in `render_with_layout'
  actionview (5.1.4) lib/action_view/renderer/template_renderer.rb:50:in `render_template'
  actionview (5.1.4) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.1.4) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.1.4) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.1.4) lib/action_view/rendering.rb:103:in `_render_template'
  actionpack (5.1.4) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.1.4) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.1.4) lib/action_controller/metal/renderers.rb:141:in `render_to_body'
  actionpack (5.1.4) lib/abstract_controller/rendering.rb:24:in `render'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.1.4) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/tommy/.rbenv/versions/2.3.1/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.1.4) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:29:in `cleanup_view_runtime'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:43:in `render'
  app/controllers/api/users_controller.rb:12:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?user[facebook_id]=pizza&user[session_token]=pizza" for 127.0.0.1 at 2017-09-16 16:22:38 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"facebook_id"=>"pizza", "session_token"=>"pizza"}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["facebook_id", "pizza"], ["session_token", "pizza"], ["visible_radius", 5], ["created_at", "2017-09-16 23:22:38.556190"], ["updated_at", "2017-09-16 23:22:38.556190"]]
  [1m[35m (2.0ms)[0m  [1m[36mcommit transaction[0m
  Rendering api/users/show.json.jbuilder
  Rendered api/users/_user.json.jbuilder (11.3ms)
  Rendered api/users/show.json.jbuilder (12.7ms)
Completed 500 Internal Server Error in 28ms (ActiveRecord: 3.1ms)



NoMethodError - undefined method `user_name' for #<User:0x007fd863813290>:
  activemodel (5.1.4) lib/active_model/attribute_methods.rb:432:in `method_missing'
  jbuilder (2.7.0) lib/jbuilder.rb:260:in `block in _extract_method_values'
  jbuilder (2.7.0) lib/jbuilder.rb:260:in `_extract_method_values'
  jbuilder (2.7.0) lib/jbuilder.rb:219:in `extract!'
  app/views/api/users/_user.json.jbuilder:1:in `_app_views_api_users__user_json_jbuilder___3276884901896839751_70283654277680'
  actionview (5.1.4) lib/action_view/template.rb:157:in `block in render'
  activesupport (5.1.4) lib/active_support/notifications.rb:168:in `instrument'
  actionview (5.1.4) lib/action_view/template.rb:352:in `instrument_render_template'
  actionview (5.1.4) lib/action_view/template.rb:155:in `render'
  actionview (5.1.4) lib/action_view/renderer/partial_renderer.rb:342:in `block in render_partial'
  actionview (5.1.4) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.1.4) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.1.4) lib/action_view/renderer/partial_renderer.rb:331:in `render_partial'
  actionview (5.1.4) lib/action_view/renderer/partial_renderer.rb:310:in `render'
  actionview (5.1.4) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.1.4) lib/action_view/renderer/renderer.rb:21:in `render'
  actionview (5.1.4) lib/action_view/helpers/rendering_helper.rb:32:in `render'
  jbuilder (2.7.0) lib/jbuilder/jbuilder_template.rb:128:in `_render_partial'
  jbuilder (2.7.0) lib/jbuilder/jbuilder_template.rb:122:in `_render_partial_with_options'
  jbuilder (2.7.0) lib/jbuilder/jbuilder_template.rb:215:in `_render_explicit_partial'
  jbuilder (2.7.0) lib/jbuilder/jbuilder_template.rb:22:in `partial!'
  app/views/api/users/show.json.jbuilder:1:in `_app_views_api_users_show_json_jbuilder___1012388731779382625_70283675636420'
  actionview (5.1.4) lib/action_view/template.rb:157:in `block in render'
  activesupport (5.1.4) lib/active_support/notifications.rb:168:in `instrument'
  actionview (5.1.4) lib/action_view/template.rb:352:in `instrument_render_template'
  actionview (5.1.4) lib/action_view/template.rb:155:in `render'
  actionview (5.1.4) lib/action_view/renderer/template_renderer.rb:52:in `block (2 levels) in render_template'
  actionview (5.1.4) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.1.4) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.1.4) lib/action_view/renderer/template_renderer.rb:51:in `block in render_template'
  actionview (5.1.4) lib/action_view/renderer/template_renderer.rb:59:in `render_with_layout'
  actionview (5.1.4) lib/action_view/renderer/template_renderer.rb:50:in `render_template'
  actionview (5.1.4) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.1.4) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.1.4) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.1.4) lib/action_view/rendering.rb:103:in `_render_template'
  actionpack (5.1.4) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.1.4) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.1.4) lib/action_controller/metal/renderers.rb:141:in `render_to_body'
  actionpack (5.1.4) lib/abstract_controller/rendering.rb:24:in `render'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.1.4) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/tommy/.rbenv/versions/2.3.1/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.1.4) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:29:in `cleanup_view_runtime'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:43:in `render'
  app/controllers/api/users_controller.rb:12:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?user[facebook_id]=pizza&user[session_token]=pizza" for 127.0.0.1 at 2017-09-16 16:23:22 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"facebook_id"=>"pizza", "session_token"=>"pizza"}}
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["facebook_id", "pizza"], ["session_token", "pizza"], ["visible_radius", 5], ["created_at", "2017-09-16 23:23:23.001436"], ["updated_at", "2017-09-16 23:23:23.001436"]]
  [1m[35m (2.2ms)[0m  [1m[36mcommit transaction[0m
  Rendering api/users/show.json.jbuilder
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "friend_id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 7]]
  Rendered api/users/_user.json.jbuilder (32.6ms)
  Rendered api/users/show.json.jbuilder (36.3ms)
Completed 200 OK in 55ms (Views: 39.7ms | ActiveRecord: 3.7ms)


Started POST "/api/users?user[facebook_id]=836863442999627&user[session_token]=EAACEdEose0cBALKhafjw8GcPmMZCqfw7oqdQ8tyWMexqEaxn9QORNwTQLOIUhEUHJs61HRjHZC8odlAsaBB5qjK01DzhZAQilFYZBWCqiI4h0aHnyBNuBZAaWJOpflpeETANba1EJqgVw3PImklmBRjintBYOoVd7sgKo2Nbyp8z9KtZAfCeXHJZByGwh3A2O2JC9qhlFS9vAZDZD" for 127.0.0.1 at 2017-09-16 16:25:31 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"facebook_id"=>"836863442999627", "session_token"=>"EAACEdEose0cBALKhafjw8GcPmMZCqfw7oqdQ8tyWMexqEaxn9QORNwTQLOIUhEUHJs61HRjHZC8odlAsaBB5qjK01DzhZAQilFYZBWCqiI4h0aHnyBNuBZAaWJOpflpeETANba1EJqgVw3PImklmBRjintBYOoVd7sgKo2Nbyp8z9KtZAfCeXHJZByGwh3A2O2JC9qhlFS9vAZDZD"}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["facebook_id", "836863442999627"], ["session_token", "EAACEdEose0cBALKhafjw8GcPmMZCqfw7oqdQ8tyWMexqEaxn9QORNwTQLOIUhEUHJs61HRjHZC8odlAsaBB5qjK01DzhZAQilFYZBWCqiI4h0aHnyBNuBZAaWJOpflpeETANba1EJqgVw3PImklmBRjintBYOoVd7sgKo2Nbyp8z9KtZAfCeXHJZByGwh3A2O2JC9qhlFS9vAZDZD"], ["visible_radius", 5], ["created_at", "2017-09-16 23:25:31.655034"], ["updated_at", "2017-09-16 23:25:31.655034"]]
  [1m[35m (1.9ms)[0m  [1m[36mcommit transaction[0m
  Rendering api/users/show.json.jbuilder
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "friend_id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 8]]
  Rendered api/users/_user.json.jbuilder (3.0ms)
  Rendered api/users/show.json.jbuilder (4.7ms)
Completed 200 OK in 14ms (Views: 8.5ms | ActiveRecord: 2.8ms)


Started POST "/api/users?user[facebook_id]=836863442999627&user[session_token]=EAACEdEose0cBALKhafjw8GcPmMZCqfw7oqdQ8tyWMexqEaxn9QORNwTQLOIUhEUHJs61HRjHZC8odlAsaBB5qjK01DzhZAQilFYZBWCqiI4h0aHnyBNuBZAaWJOpflpeETANba1EJqgVw3PImklmBRjintBYOoVd7sgKo2Nbyp8z9KtZAfCeXHJZByGwh3A2O2JC9qhlFS9vAZDZD" for 127.0.0.1 at 2017-09-16 16:25:58 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"facebook_id"=>"836863442999627", "session_token"=>"EAACEdEose0cBALKhafjw8GcPmMZCqfw7oqdQ8tyWMexqEaxn9QORNwTQLOIUhEUHJs61HRjHZC8odlAsaBB5qjK01DzhZAQilFYZBWCqiI4h0aHnyBNuBZAaWJOpflpeETANba1EJqgVw3PImklmBRjintBYOoVd7sgKo2Nbyp8z9KtZAfCeXHJZByGwh3A2O2JC9qhlFS9vAZDZD"}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at", "name", "pro_pic_url") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "836863442999627"], ["session_token", "EAACEdEose0cBALKhafjw8GcPmMZCqfw7oqdQ8tyWMexqEaxn9QORNwTQLOIUhEUHJs61HRjHZC8odlAsaBB5qjK01DzhZAQilFYZBWCqiI4h0aHnyBNuBZAaWJOpflpeETANba1EJqgVw3PImklmBRjintBYOoVd7sgKo2Nbyp8z9KtZAfCeXHJZByGwh3A2O2JC9qhlFS9vAZDZD"], ["visible_radius", 5], ["created_at", "2017-09-16 23:25:58.897092"], ["updated_at", "2017-09-16 23:25:58.897092"], ["name", "Tommy Kilmer"], ["pro_pic_url", "http://graph.facebook.com/836863442999627/picture"]]
  [1m[35m (1.8ms)[0m  [1m[36mcommit transaction[0m
  Rendering api/users/show.json.jbuilder
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "friend_id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 9]]
  Rendered api/users/_user.json.jbuilder (19.8ms)
  Rendered api/users/show.json.jbuilder (21.3ms)
Completed 200 OK in 182ms (Views: 26.7ms | ActiveRecord: 3.4ms)


  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "friendships" WHERE "friendships"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35m (2.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "friendships" WHERE "friendships"."id" = ?[0m  [["id", 3]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ?[0m  [["user_id", 3]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "friendships" WHERE "friendships"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "friendships" WHERE "friendships"."id" = ?[0m  [["id", 4]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ?[0m  [["user_id", 4]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 4]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ?[0m  [["user_id", 5]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 5]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ?[0m  [["user_id", 6]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 6]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ?[0m  [["user_id", 7]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 7]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ?[0m  [["user_id", 8]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 8]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ?[0m  [["user_id", 9]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 9]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mLocation Load (0.3ms)[0m  [1m[34mSELECT "locations".* FROM "locations"[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 2]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mFriendship Load (0.2ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships"[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "735 Minna"], ["latitude", 37.776521], ["longitude", -122.413125], ["created_at", "2017-09-16 23:41:28.882917"], ["updated_at", "2017-09-16 23:41:28.882917"]]
  [1m[35m (1.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "431 Tehma"], ["latitude", 37.78036], ["longitude", -122.405042], ["created_at", "2017-09-16 23:41:28.886801"], ["updated_at", "2017-09-16 23:41:28.886801"]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "1600 Ampitheater Parkway"], ["latitude", 37.421655], ["longitude", -122.085637], ["created_at", "2017-09-16 23:41:28.889530"], ["updated_at", "2017-09-16 23:41:28.889530"]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("session_token", "location_id", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["session_token", "abc"], ["location_id", 6], ["visible_radius", 15], ["created_at", "2017-09-16 23:41:28.891758"], ["updated_at", "2017-09-16 23:41:28.891758"]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mLocation Load (0.1ms)[0m  [1m[34mSELECT "locations".* FROM "locations"[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 4]]
  [1m[35m (2.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 5]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 6]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mFriendship Load (0.2ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "735 Minna"], ["latitude", 37.776521], ["longitude", -122.413125], ["created_at", "2017-09-16 23:41:50.467651"], ["updated_at", "2017-09-16 23:41:50.467651"]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "431 Tehma"], ["latitude", 37.78036], ["longitude", -122.405042], ["created_at", "2017-09-16 23:41:50.470286"], ["updated_at", "2017-09-16 23:41:50.470286"]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "1600 Ampitheater Parkway"], ["latitude", 37.421655], ["longitude", -122.085637], ["created_at", "2017-09-16 23:41:50.472703"], ["updated_at", "2017-09-16 23:41:50.472703"]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "location_id", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "1"], ["session_token", "abc"], ["location_id", 9], ["visible_radius", 15], ["created_at", "2017-09-16 23:41:50.482722"], ["updated_at", "2017-09-16 23:41:50.482722"]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "location_id", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "2"], ["session_token", "def"], ["location_id", 7], ["visible_radius", 15], ["created_at", "2017-09-16 23:41:50.485262"], ["updated_at", "2017-09-16 23:41:50.485262"]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "location_id", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "3"], ["session_token", "ghi"], ["location_id", 8], ["visible_radius", 15], ["created_at", "2017-09-16 23:41:50.487696"], ["updated_at", "2017-09-16 23:41:50.487696"]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 10], ["friend_id", 12], ["created_at", "2017-09-16 23:41:50.505790"], ["updated_at", "2017-09-16 23:41:50.505790"]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 12], ["friend_id", 10], ["created_at", "2017-09-16 23:41:50.509084"], ["updated_at", "2017-09-16 23:41:50.509084"]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 11], ["friend_id", 12], ["created_at", "2017-09-16 23:41:50.512208"], ["updated_at", "2017-09-16 23:41:50.512208"]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 12], ["friend_id", 11], ["created_at", "2017-09-16 23:41:50.515667"], ["updated_at", "2017-09-16 23:41:50.515667"]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Started POST "/api/users?user[session_token]=EAACEdEose0cBAHYeKjMzPM0Mee1MelVmrddimzgTklDoOErD7ZCyZCbIitVOekPVyVS0Bhw6yZBdOxy1J09QbqpjmhlUsDYsflNDTnbxRaRHgDeZB0OCRDMBGqKkACfa2EUYEGktah3WEZC1YpELkX7bmk0iSwOXIY3iOVmi8lX8o3QhrVlFbmT5h9WZA27AVvpZC109bNlvwZDZD" for 127.0.0.1 at 2017-09-16 16:42:10 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAACEdEose0cBAHYeKjMzPM0Mee1MelVmrddimzgTklDoOErD7ZCyZCbIitVOekPVyVS0Bhw6yZBdOxy1J09QbqpjmhlUsDYsflNDTnbxRaRHgDeZB0OCRDMBGqKkACfa2EUYEGktah3WEZC1YpELkX7bmk0iSwOXIY3iOVmi8lX8o3QhrVlFbmT5h9WZA27AVvpZC109bNlvwZDZD"}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at", "name", "pro_pic_url") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "836863442999627"], ["session_token", "EAACEdEose0cBAHYeKjMzPM0Mee1MelVmrddimzgTklDoOErD7ZCyZCbIitVOekPVyVS0Bhw6yZBdOxy1J09QbqpjmhlUsDYsflNDTnbxRaRHgDeZB0OCRDMBGqKkACfa2EUYEGktah3WEZC1YpELkX7bmk0iSwOXIY3iOVmi8lX8o3QhrVlFbmT5h9WZA27AVvpZC109bNlvwZDZD"], ["visible_radius", 5], ["created_at", "2017-09-16 23:42:10.882860"], ["updated_at", "2017-09-16 23:42:10.882860"], ["name", "Tommy Kilmer"], ["pro_pic_url", "http://graph.facebook.com/836863442999627/picture"]]
  [1m[35m (2.1ms)[0m  [1m[36mcommit transaction[0m
  Rendering api/users/show.json.jbuilder
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "friend_id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 13]]
  Rendered api/users/_user.json.jbuilder (16.5ms)
  Rendered api/users/show.json.jbuilder (17.9ms)
Completed 200 OK in 313ms (Views: 22.6ms | ActiveRecord: 4.1ms)


  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 13]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddIndextoFbId (20170916234920)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "index_users_on_facebook_id" ON "users" ("facebook_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_facebook_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_facebook_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_users_on_session_token" ON "users" ("session_token")[0m
  [1m[35m (0.0ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_session_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_session_token' AND type='index'
[0m
  [1m[35m (0.0ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_facebook_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_facebook_id' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE  INDEX "index_users_on_location_id" ON "users" ("location_id")[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20170916234920"]]
  [1m[35m (1.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_longitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_longitude' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_location_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_location_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_session_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_session_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_facebook_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_facebook_id' AND type='index'
[0m
Started POST "/api/users?user[session_token]=EAACEdEose0cBAHYeKjMzPM0Mee1MelVmrddimzgTklDoOErD7ZCyZCbIitVOekPVyVS0Bhw6yZBdOxy1J09QbqpjmhlUsDYsflNDTnbxRaRHgDeZB0OCRDMBGqKkACfa2EUYEGktah3WEZC1YpELkX7bmk0iSwOXIY3iOVmi8lX8o3QhrVlFbmT5h9WZA27AVvpZC109bNlvwZDZD" for 127.0.0.1 at 2017-09-16 16:54:00 -0700
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAACEdEose0cBAHYeKjMzPM0Mee1MelVmrddimzgTklDoOErD7ZCyZCbIitVOekPVyVS0Bhw6yZBdOxy1J09QbqpjmhlUsDYsflNDTnbxRaRHgDeZB0OCRDMBGqKkACfa2EUYEGktah3WEZC1YpELkX7bmk0iSwOXIY3iOVmi8lX8o3QhrVlFbmT5h9WZA27AVvpZC109bNlvwZDZD"}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at", "name", "pro_pic_url") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "836863442999627"], ["session_token", "EAACEdEose0cBAHYeKjMzPM0Mee1MelVmrddimzgTklDoOErD7ZCyZCbIitVOekPVyVS0Bhw6yZBdOxy1J09QbqpjmhlUsDYsflNDTnbxRaRHgDeZB0OCRDMBGqKkACfa2EUYEGktah3WEZC1YpELkX7bmk0iSwOXIY3iOVmi8lX8o3QhrVlFbmT5h9WZA27AVvpZC109bNlvwZDZD"], ["visible_radius", 5], ["created_at", "2017-09-16 23:54:00.842984"], ["updated_at", "2017-09-16 23:54:00.842984"], ["name", "Tommy Kilmer"], ["pro_pic_url", "http://graph.facebook.com/836863442999627/picture"]]
  [1m[35m (2.2ms)[0m  [1m[36mcommit transaction[0m
  Rendering api/users/show.json.jbuilder
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "friend_id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 14]]
  Rendered api/users/_user.json.jbuilder (15.4ms)
  Rendered api/users/show.json.jbuilder (16.9ms)
Completed 200 OK in 556ms (Views: 23.0ms | ActiveRecord: 3.6ms)


Started POST "/api/users?user[session_token]=EAACEdEose0cBAIaoomfeRJRDjrkddaXHAAZAQ85GNnq2uIlTqy8Cwp7tkhTifcn7zsKQDG7GZBZCc4LZCt9KZCjUVHxMhhLdOdr54M5f0D6GprRWHYnr73f6bejzXXg8ZB2p0b7vGhM2F2FR4XKHZC5Gx4wC8WxVvCuCzQbeGhA4nIArMtNPawogq2ka8Af0iylsoFApZBmjIgZDZD" for 127.0.0.1 at 2017-09-16 16:54:18 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAACEdEose0cBAIaoomfeRJRDjrkddaXHAAZAQ85GNnq2uIlTqy8Cwp7tkhTifcn7zsKQDG7GZBZCc4LZCt9KZCjUVHxMhhLdOdr54M5f0D6GprRWHYnr73f6bejzXXg8ZB2p0b7vGhM2F2FR4XKHZC5Gx4wC8WxVvCuCzQbeGhA4nIArMtNPawogq2ka8Af0iylsoFApZBmjIgZDZD"}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at", "name", "pro_pic_url") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "836863442999627"], ["session_token", "EAACEdEose0cBAIaoomfeRJRDjrkddaXHAAZAQ85GNnq2uIlTqy8Cwp7tkhTifcn7zsKQDG7GZBZCc4LZCt9KZCjUVHxMhhLdOdr54M5f0D6GprRWHYnr73f6bejzXXg8ZB2p0b7vGhM2F2FR4XKHZC5Gx4wC8WxVvCuCzQbeGhA4nIArMtNPawogq2ka8Af0iylsoFApZBmjIgZDZD"], ["visible_radius", 5], ["created_at", "2017-09-16 23:54:18.963800"], ["updated_at", "2017-09-16 23:54:18.963800"], ["name", "Tommy Kilmer"], ["pro_pic_url", "http://graph.facebook.com/836863442999627/picture"]]
  [1m[35m (2.1ms)[0m  [1m[36mcommit transaction[0m
  Rendering api/users/show.json.jbuilder
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "friend_id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 15]]
  Rendered api/users/_user.json.jbuilder (2.7ms)
  Rendered api/users/show.json.jbuilder (4.4ms)
Completed 200 OK in 532ms (Views: 8.4ms | ActiveRecord: 3.1ms)


  [1m[36mFriendship Load (1.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships"[0m
Started POST "/api/users?user[session_token]=EAACEdEose0cBAIaoomfeRJRDjrkddaXHAAZAQ85GNnq2uIlTqy8Cwp7tkhTifcn7zsKQDG7GZBZCc4LZCt9KZCjUVHxMhhLdOdr54M5f0D6GprRWHYnr73f6bejzXXg8ZB2p0b7vGhM2F2FR4XKHZC5Gx4wC8WxVvCuCzQbeGhA4nIArMtNPawogq2ka8Af0iylsoFApZBmjIgZDZD" for 127.0.0.1 at 2017-09-16 16:57:55 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAACEdEose0cBAIaoomfeRJRDjrkddaXHAAZAQ85GNnq2uIlTqy8Cwp7tkhTifcn7zsKQDG7GZBZCc4LZCt9KZCjUVHxMhhLdOdr54M5f0D6GprRWHYnr73f6bejzXXg8ZB2p0b7vGhM2F2FR4XKHZC5Gx4wC8WxVvCuCzQbeGhA4nIArMtNPawogq2ka8Af0iylsoFApZBmjIgZDZD"}}
Completed 500 Internal Server Error in 473ms (ActiveRecord: 0.9ms)



NameError - undefined local variable or method `friends_ids' for #<User:0x007fd8607a64e0>
Did you mean?  friend_ids
               friendship_ids
               friendship_ids=
               friendships
               friends
               friend_ids=
               friendships=:
  activemodel (5.1.4) lib/active_model/attribute_methods.rb:432:in `method_missing'
  app/models/user.rb:20:in `add_friends'
  app/models/user.rb:14:in `fill_user_data'
  app/controllers/api/users_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?user[session_token]=EAACEdEose0cBAIaoomfeRJRDjrkddaXHAAZAQ85GNnq2uIlTqy8Cwp7tkhTifcn7zsKQDG7GZBZCc4LZCt9KZCjUVHxMhhLdOdr54M5f0D6GprRWHYnr73f6bejzXXg8ZB2p0b7vGhM2F2FR4XKHZC5Gx4wC8WxVvCuCzQbeGhA4nIArMtNPawogq2ka8Af0iylsoFApZBmjIgZDZD" for 127.0.0.1 at 2017-09-16 16:58:13 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAACEdEose0cBAIaoomfeRJRDjrkddaXHAAZAQ85GNnq2uIlTqy8Cwp7tkhTifcn7zsKQDG7GZBZCc4LZCt9KZCjUVHxMhhLdOdr54M5f0D6GprRWHYnr73f6bejzXXg8ZB2p0b7vGhM2F2FR4XKHZC5Gx4wC8WxVvCuCzQbeGhA4nIArMtNPawogq2ka8Af0iylsoFApZBmjIgZDZD"}}
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 809058], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 552ms (ActiveRecord: 1.3ms)



ActiveRecord::RecordInvalid - Validation failed: User must exist, Friend must exist:
  activerecord (5.1.4) lib/active_record/validations.rb:78:in `raise_validation_error'
  activerecord (5.1.4) lib/active_record/validations.rb:50:in `save!'
  activerecord (5.1.4) lib/active_record/attribute_methods/dirty.rb:43:in `save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `block in save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:384:in `block in with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `block in transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:194:in `block in within_new_transaction'
  /Users/tommy/.rbenv/versions/2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:191:in `within_new_transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:210:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:381:in `with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `save!'
  activerecord (5.1.4) lib/active_record/suppressor.rb:46:in `save!'
  activerecord (5.1.4) lib/active_record/persistence.rb:51:in `create!'
  app/models/user.rb:21:in `block in add_friends'
  app/models/user.rb:20:in `add_friends'
  app/models/user.rb:14:in `fill_user_data'
  app/controllers/api/users_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?user[session_token]=EAAY5MI6sEZCgBAME1PxyxhJ4RCZAIwNlqZCv9z9g8glzqKAzMtxGAd2rFw3ZBAlWZBEXFTzZB81ABmTppUL3oYJWDq1zvsMk9UU0D11VGXHfYQBRmLXZCkCttekFvtTiZBoG47bzaS9Ak84dq5Ucq08UsrKDeOxT23xUGPzjp5O9LwN3MfNjtjT6l9bAYp2iPC6BZBMEejZAaqtAZDZD" for 127.0.0.1 at 2017-09-16 16:59:31 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAME1PxyxhJ4RCZAIwNlqZCv9z9g8glzqKAzMtxGAd2rFw3ZBAlWZBEXFTzZB81ABmTppUL3oYJWDq1zvsMk9UU0D11VGXHfYQBRmLXZCkCttekFvtTiZBoG47bzaS9Ak84dq5Ucq08UsrKDeOxT23xUGPzjp5O9LwN3MfNjtjT6l9bAYp2iPC6BZBMEejZAaqtAZDZD"}}
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at", "name", "pro_pic_url") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "1683815938304369"], ["session_token", "EAAY5MI6sEZCgBAME1PxyxhJ4RCZAIwNlqZCv9z9g8glzqKAzMtxGAd2rFw3ZBAlWZBEXFTzZB81ABmTppUL3oYJWDq1zvsMk9UU0D11VGXHfYQBRmLXZCkCttekFvtTiZBoG47bzaS9Ak84dq5Ucq08UsrKDeOxT23xUGPzjp5O9LwN3MfNjtjT6l9bAYp2iPC6BZBMEejZAaqtAZDZD"], ["visible_radius", 5], ["created_at", "2017-09-16 23:59:32.355622"], ["updated_at", "2017-09-16 23:59:32.355622"], ["name", "Tommy Kilmer"], ["pro_pic_url", "http://graph.facebook.com/1683815938304369/picture"]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  Rendering api/users/show.json.jbuilder
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "friend_id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 16]]
  Rendered api/users/_user.json.jbuilder (5.1ms)
  Rendered api/users/show.json.jbuilder (6.0ms)
Completed 200 OK in 519ms (Views: 11.4ms | ActiveRecord: 1.5ms)


Started POST "/api/users?user[session_token]=EAAY5MI6sEZCgBAME1PxyxhJ4RCZAIwNlqZCv9z9g8glzqKAzMtxGAd2rFw3ZBAlWZBEXFTzZB81ABmTppUL3oYJWDq1zvsMk9UU0D11VGXHfYQBRmLXZCkCttekFvtTiZBoG47bzaS9Ak84dq5Ucq08UsrKDeOxT23xUGPzjp5O9LwN3MfNjtjT6l9bAYp2iPC6BZBMEejZAaqtAZDZD" for 127.0.0.1 at 2017-09-16 17:00:31 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAME1PxyxhJ4RCZAIwNlqZCv9z9g8glzqKAzMtxGAd2rFw3ZBAlWZBEXFTzZB81ABmTppUL3oYJWDq1zvsMk9UU0D11VGXHfYQBRmLXZCkCttekFvtTiZBoG47bzaS9Ak84dq5Ucq08UsrKDeOxT23xUGPzjp5O9LwN3MfNjtjT6l9bAYp2iPC6BZBMEejZAaqtAZDZD"}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 469ms (ActiveRecord: 0.1ms)



ActiveRecord::RecordInvalid - Validation failed: User must exist, Friend must exist:
  activerecord (5.1.4) lib/active_record/validations.rb:78:in `raise_validation_error'
  activerecord (5.1.4) lib/active_record/validations.rb:50:in `save!'
  activerecord (5.1.4) lib/active_record/attribute_methods/dirty.rb:43:in `save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `block in save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:384:in `block in with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `block in transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:194:in `block in within_new_transaction'
  /Users/tommy/.rbenv/versions/2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:191:in `within_new_transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:210:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:381:in `with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `save!'
  activerecord (5.1.4) lib/active_record/suppressor.rb:46:in `save!'
  activerecord (5.1.4) lib/active_record/persistence.rb:51:in `create!'
  app/models/user.rb:21:in `block in add_friends'
  app/models/user.rb:20:in `add_friends'
  app/models/user.rb:14:in `fill_user_data'
  app/controllers/api/users_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?user[session_token]=EAAY5MI6sEZCgBAME1PxyxhJ4RCZAIwNlqZCv9z9g8glzqKAzMtxGAd2rFw3ZBAlWZBEXFTzZB81ABmTppUL3oYJWDq1zvsMk9UU0D11VGXHfYQBRmLXZCkCttekFvtTiZBoG47bzaS9Ak84dq5Ucq08UsrKDeOxT23xUGPzjp5O9LwN3MfNjtjT6l9bAYp2iPC6BZBMEejZAaqtAZDZD" for 127.0.0.1 at 2017-09-16 17:00:34 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAME1PxyxhJ4RCZAIwNlqZCv9z9g8glzqKAzMtxGAd2rFw3ZBAlWZBEXFTzZB81ABmTppUL3oYJWDq1zvsMk9UU0D11VGXHfYQBRmLXZCkCttekFvtTiZBoG47bzaS9Ak84dq5Ucq08UsrKDeOxT23xUGPzjp5O9LwN3MfNjtjT6l9bAYp2iPC6BZBMEejZAaqtAZDZD"}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 487ms (ActiveRecord: 0.1ms)



ActiveRecord::RecordInvalid - Validation failed: User must exist, Friend must exist:
  activerecord (5.1.4) lib/active_record/validations.rb:78:in `raise_validation_error'
  activerecord (5.1.4) lib/active_record/validations.rb:50:in `save!'
  activerecord (5.1.4) lib/active_record/attribute_methods/dirty.rb:43:in `save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `block in save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:384:in `block in with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `block in transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:194:in `block in within_new_transaction'
  /Users/tommy/.rbenv/versions/2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:191:in `within_new_transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:210:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:381:in `with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `save!'
  activerecord (5.1.4) lib/active_record/suppressor.rb:46:in `save!'
  activerecord (5.1.4) lib/active_record/persistence.rb:51:in `create!'
  app/models/user.rb:21:in `block in add_friends'
  app/models/user.rb:20:in `add_friends'
  app/models/user.rb:14:in `fill_user_data'
  app/controllers/api/users_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
Started POST "/api/users?user[session_token]=EAAY5MI6sEZCgBAFXOLQelcY40ykhA3kkBsaqcZAAZAhbZBM0a2SiNNjNHcUy5bZCpQMcLmaQxxXTDVGpQUGx4AWUVEV5a57HOAonKVl590ALDLPScRcxXw7ZBRWNjvtkZAOwhHKJjbUyZB35ziyZAkZA4JWotuYVdOM9ihXxm9JJSqoveLvWnZBnMQ8Nv9KBf0FApdkZAGnsZALZB8eMGcseBCD95q" for 127.0.0.1 at 2017-09-16 17:03:18 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAFXOLQelcY40ykhA3kkBsaqcZAAZAhbZBM0a2SiNNjNHcUy5bZCpQMcLmaQxxXTDVGpQUGx4AWUVEV5a57HOAonKVl590ALDLPScRcxXw7ZBRWNjvtkZAOwhHKJjbUyZB35ziyZAkZA4JWotuYVdOM9ihXxm9JJSqoveLvWnZBnMQ8Nv9KBf0FApdkZAGnsZALZB8eMGcseBCD95q"}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 634ms (ActiveRecord: 0.1ms)



ActiveRecord::RecordInvalid - Validation failed: User must exist, Friend must exist:
  activerecord (5.1.4) lib/active_record/validations.rb:78:in `raise_validation_error'
  activerecord (5.1.4) lib/active_record/validations.rb:50:in `save!'
  activerecord (5.1.4) lib/active_record/attribute_methods/dirty.rb:43:in `save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `block in save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:384:in `block in with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `block in transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:194:in `block in within_new_transaction'
  /Users/tommy/.rbenv/versions/2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:191:in `within_new_transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:210:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:381:in `with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `save!'
  activerecord (5.1.4) lib/active_record/suppressor.rb:46:in `save!'
  activerecord (5.1.4) lib/active_record/persistence.rb:51:in `create!'
  app/models/user.rb:21:in `block in add_friends'
  app/models/user.rb:20:in `add_friends'
  app/models/user.rb:14:in `fill_user_data'
  app/controllers/api/users_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "10155757977328035"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "1683815938304369"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "1683815938304369"], ["LIMIT", 1]]
Started POST "/api/users?user[session_token]=EAAY5MI6sEZCgBAFXOLQelcY40ykhA3kkBsaqcZAAZAhbZBM0a2SiNNjNHcUy5bZCpQMcLmaQxxXTDVGpQUGx4AWUVEV5a57HOAonKVl590ALDLPScRcxXw7ZBRWNjvtkZAOwhHKJjbUyZB35ziyZAkZA4JWotuYVdOM9ihXxm9JJSqoveLvWnZBnMQ8Nv9KBf0FApdkZAGnsZALZB8eMGcseBCD95q" for 127.0.0.1 at 2017-09-16 17:05:53 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAFXOLQelcY40ykhA3kkBsaqcZAAZAhbZBM0a2SiNNjNHcUy5bZCpQMcLmaQxxXTDVGpQUGx4AWUVEV5a57HOAonKVl590ALDLPScRcxXw7ZBRWNjvtkZAOwhHKJjbUyZB35ziyZAkZA4JWotuYVdOM9ihXxm9JJSqoveLvWnZBnMQ8Nv9KBf0FApdkZAGnsZALZB8eMGcseBCD95q"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "1683815938304369"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 647ms (ActiveRecord: 1.5ms)



ActiveRecord::RecordInvalid - Validation failed: User must exist:
  activerecord (5.1.4) lib/active_record/validations.rb:78:in `raise_validation_error'
  activerecord (5.1.4) lib/active_record/validations.rb:50:in `save!'
  activerecord (5.1.4) lib/active_record/attribute_methods/dirty.rb:43:in `save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `block in save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:384:in `block in with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `block in transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:194:in `block in within_new_transaction'
  /Users/tommy/.rbenv/versions/2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:191:in `within_new_transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:210:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:381:in `with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `save!'
  activerecord (5.1.4) lib/active_record/suppressor.rb:46:in `save!'
  activerecord (5.1.4) lib/active_record/persistence.rb:51:in `create!'
  app/models/user.rb:23:in `block in add_friends'
  app/models/user.rb:21:in `add_friends'
  app/models/user.rb:14:in `fill_user_data'
  app/controllers/api/users_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?user[session_token]=EAAY5MI6sEZCgBAFXOLQelcY40ykhA3kkBsaqcZAAZAhbZBM0a2SiNNjNHcUy5bZCpQMcLmaQxxXTDVGpQUGx4AWUVEV5a57HOAonKVl590ALDLPScRcxXw7ZBRWNjvtkZAOwhHKJjbUyZB35ziyZAkZA4JWotuYVdOM9ihXxm9JJSqoveLvWnZBnMQ8Nv9KBf0FApdkZAGnsZALZB8eMGcseBCD95q" for 127.0.0.1 at 2017-09-16 17:06:16 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAFXOLQelcY40ykhA3kkBsaqcZAAZAhbZBM0a2SiNNjNHcUy5bZCpQMcLmaQxxXTDVGpQUGx4AWUVEV5a57HOAonKVl590ALDLPScRcxXw7ZBRWNjvtkZAOwhHKJjbUyZB35ziyZAkZA4JWotuYVdOM9ihXxm9JJSqoveLvWnZBnMQ8Nv9KBf0FApdkZAGnsZALZB8eMGcseBCD95q"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "1683815938304369"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 626ms (ActiveRecord: 1.6ms)



ActiveRecord::RecordInvalid - Validation failed: User must exist:
  activerecord (5.1.4) lib/active_record/validations.rb:78:in `raise_validation_error'
  activerecord (5.1.4) lib/active_record/validations.rb:50:in `save!'
  activerecord (5.1.4) lib/active_record/attribute_methods/dirty.rb:43:in `save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `block in save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:384:in `block in with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `block in transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:194:in `block in within_new_transaction'
  /Users/tommy/.rbenv/versions/2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:191:in `within_new_transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:210:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:381:in `with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `save!'
  activerecord (5.1.4) lib/active_record/suppressor.rb:46:in `save!'
  activerecord (5.1.4) lib/active_record/persistence.rb:51:in `create!'
  app/models/user.rb:24:in `block in add_friends'
  app/models/user.rb:22:in `add_friends'
  app/models/user.rb:14:in `fill_user_data'
  app/controllers/api/users_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?user[session_token]=EAAY5MI6sEZCgBAFXOLQelcY40ykhA3kkBsaqcZAAZAhbZBM0a2SiNNjNHcUy5bZCpQMcLmaQxxXTDVGpQUGx4AWUVEV5a57HOAonKVl590ALDLPScRcxXw7ZBRWNjvtkZAOwhHKJjbUyZB35ziyZAkZA4JWotuYVdOM9ihXxm9JJSqoveLvWnZBnMQ8Nv9KBf0FApdkZAGnsZALZB8eMGcseBCD95q" for 127.0.0.1 at 2017-09-16 17:06:26 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAFXOLQelcY40ykhA3kkBsaqcZAAZAhbZBM0a2SiNNjNHcUy5bZCpQMcLmaQxxXTDVGpQUGx4AWUVEV5a57HOAonKVl590ALDLPScRcxXw7ZBRWNjvtkZAOwhHKJjbUyZB35ziyZAkZA4JWotuYVdOM9ihXxm9JJSqoveLvWnZBnMQ8Nv9KBf0FApdkZAGnsZALZB8eMGcseBCD95q"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "1683815938304369"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 512ms (ActiveRecord: 0.5ms)



ActiveRecord::RecordInvalid - Validation failed: User must exist:
  activerecord (5.1.4) lib/active_record/validations.rb:78:in `raise_validation_error'
  activerecord (5.1.4) lib/active_record/validations.rb:50:in `save!'
  activerecord (5.1.4) lib/active_record/attribute_methods/dirty.rb:43:in `save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `block in save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:384:in `block in with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `block in transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:194:in `block in within_new_transaction'
  /Users/tommy/.rbenv/versions/2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:191:in `within_new_transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:210:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:381:in `with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `save!'
  activerecord (5.1.4) lib/active_record/suppressor.rb:46:in `save!'
  activerecord (5.1.4) lib/active_record/persistence.rb:51:in `create!'
  app/models/user.rb:24:in `block in add_friends'
  app/models/user.rb:22:in `add_friends'
  app/models/user.rb:14:in `fill_user_data'
  app/controllers/api/users_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?user[session_token]=EAAY5MI6sEZCgBAFXOLQelcY40ykhA3kkBsaqcZAAZAhbZBM0a2SiNNjNHcUy5bZCpQMcLmaQxxXTDVGpQUGx4AWUVEV5a57HOAonKVl590ALDLPScRcxXw7ZBRWNjvtkZAOwhHKJjbUyZB35ziyZAkZA4JWotuYVdOM9ihXxm9JJSqoveLvWnZBnMQ8Nv9KBf0FApdkZAGnsZALZB8eMGcseBCD95q" for 127.0.0.1 at 2017-09-16 17:07:49 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAFXOLQelcY40ykhA3kkBsaqcZAAZAhbZBM0a2SiNNjNHcUy5bZCpQMcLmaQxxXTDVGpQUGx4AWUVEV5a57HOAonKVl590ALDLPScRcxXw7ZBRWNjvtkZAOwhHKJjbUyZB35ziyZAkZA4JWotuYVdOM9ihXxm9JJSqoveLvWnZBnMQ8Nv9KBf0FApdkZAGnsZALZB8eMGcseBCD95q"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "1683815938304369"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 524ms (ActiveRecord: 1.6ms)



ActiveRecord::RecordInvalid - Validation failed: User must exist:
  activerecord (5.1.4) lib/active_record/validations.rb:78:in `raise_validation_error'
  activerecord (5.1.4) lib/active_record/validations.rb:50:in `save!'
  activerecord (5.1.4) lib/active_record/attribute_methods/dirty.rb:43:in `save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `block in save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:384:in `block in with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `block in transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:194:in `block in within_new_transaction'
  /Users/tommy/.rbenv/versions/2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:191:in `within_new_transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:210:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:381:in `with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `save!'
  activerecord (5.1.4) lib/active_record/suppressor.rb:46:in `save!'
  activerecord (5.1.4) lib/active_record/persistence.rb:51:in `create!'
  app/models/user.rb:28:in `block in add_friends'
  app/models/user.rb:26:in `add_friends'
  app/models/user.rb:14:in `fill_user_data'
  app/controllers/api/users_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?user[session_token]=EAAY5MI6sEZCgBAFXOLQelcY40ykhA3kkBsaqcZAAZAhbZBM0a2SiNNjNHcUy5bZCpQMcLmaQxxXTDVGpQUGx4AWUVEV5a57HOAonKVl590ALDLPScRcxXw7ZBRWNjvtkZAOwhHKJjbUyZB35ziyZAkZA4JWotuYVdOM9ihXxm9JJSqoveLvWnZBnMQ8Nv9KBf0FApdkZAGnsZALZB8eMGcseBCD95q" for 127.0.0.1 at 2017-09-16 17:08:53 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAFXOLQelcY40ykhA3kkBsaqcZAAZAhbZBM0a2SiNNjNHcUy5bZCpQMcLmaQxxXTDVGpQUGx4AWUVEV5a57HOAonKVl590ALDLPScRcxXw7ZBRWNjvtkZAOwhHKJjbUyZB35ziyZAkZA4JWotuYVdOM9ihXxm9JJSqoveLvWnZBnMQ8Nv9KBf0FApdkZAGnsZALZB8eMGcseBCD95q"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "1683815938304369"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 481ms (ActiveRecord: 1.7ms)



ActiveRecord::RecordInvalid - Validation failed: User must exist:
  activerecord (5.1.4) lib/active_record/validations.rb:78:in `raise_validation_error'
  activerecord (5.1.4) lib/active_record/validations.rb:50:in `save!'
  activerecord (5.1.4) lib/active_record/attribute_methods/dirty.rb:43:in `save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `block in save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:384:in `block in with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `block in transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:194:in `block in within_new_transaction'
  /Users/tommy/.rbenv/versions/2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:191:in `within_new_transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:210:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:381:in `with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `save!'
  activerecord (5.1.4) lib/active_record/suppressor.rb:46:in `save!'
  activerecord (5.1.4) lib/active_record/persistence.rb:51:in `create!'
  app/models/user.rb:28:in `block in add_friends'
  app/models/user.rb:26:in `add_friends'
  app/models/user.rb:14:in `fill_user_data'
  app/controllers/api/users_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

  [1m[36mFriendship Load (0.2ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "friendships"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "friendships" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "friend_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "locations"[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "locations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "latitude" decimal(15,10), "longitude" decimal(15,10), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_latitude_and_longitude" ON "locations" ("latitude", "longitude")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_latitude" ON "locations" ("latitude")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_longitude" ON "locations" ("longitude")[0m
  [1m[35m (1.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "facebook_id" varchar NOT NULL, "session_token" varchar NOT NULL, "location_id" integer, "visible_radius" integer DEFAULT 10 NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "name" varchar, "pro_pic_url" varchar)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX "index_users_on_facebook_id" ON "users" ("facebook_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_facebook_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_facebook_id' AND type='index'
[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX "index_users_on_location_id" ON "users" ("location_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_location_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_location_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_facebook_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_facebook_id' AND type='index'
[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "index_users_on_session_token" ON "users" ("session_token")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "friendships"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "friendships" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "friend_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "locations"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "locations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "latitude" decimal(15,10), "longitude" decimal(15,10), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_latitude_and_longitude" ON "locations" ("latitude", "longitude")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_latitude" ON "locations" ("latitude")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_longitude" ON "locations" ("longitude")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "facebook_id" varchar NOT NULL, "session_token" varchar NOT NULL, "location_id" integer, "visible_radius" integer DEFAULT 10 NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "name" varchar, "pro_pic_url" varchar)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX "index_users_on_facebook_id" ON "users" ("facebook_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_facebook_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_facebook_id' AND type='index'
[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "index_users_on_location_id" ON "users" ("location_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_location_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_location_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_facebook_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_facebook_id' AND type='index'
[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX "index_users_on_session_token" ON "users" ("session_token")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170916234920)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mLocation Load (0.1ms)[0m  [1m[34mSELECT "locations".* FROM "locations"[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "735 Minna"], ["latitude", 37.776521], ["longitude", -122.413125], ["created_at", "2017-09-17 00:09:30.177006"], ["updated_at", "2017-09-17 00:09:30.177006"]]
  [1m[35m (1.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "431 Tehma"], ["latitude", 37.78036], ["longitude", -122.405042], ["created_at", "2017-09-17 00:09:30.181156"], ["updated_at", "2017-09-17 00:09:30.181156"]]
  [1m[35m (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "1600 Ampitheater Parkway"], ["latitude", 37.421655], ["longitude", -122.085637], ["created_at", "2017-09-17 00:09:30.183786"], ["updated_at", "2017-09-17 00:09:30.183786"]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "location_id", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "1"], ["session_token", "abc"], ["location_id", 3], ["visible_radius", 15], ["created_at", "2017-09-17 00:09:30.193027"], ["updated_at", "2017-09-17 00:09:30.193027"]]
  [1m[35m (1.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "location_id", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "2"], ["session_token", "def"], ["location_id", 1], ["visible_radius", 15], ["created_at", "2017-09-17 00:09:30.196358"], ["updated_at", "2017-09-17 00:09:30.196358"]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "location_id", "visible_radius", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "3"], ["session_token", "ghi"], ["location_id", 2], ["visible_radius", 15], ["created_at", "2017-09-17 00:09:30.199106"], ["updated_at", "2017-09-17 00:09:30.199106"]]
  [1m[35m (2.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["friend_id", 3], ["created_at", "2017-09-17 00:09:30.224365"], ["updated_at", "2017-09-17 00:09:30.224365"]]
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 3], ["friend_id", 1], ["created_at", "2017-09-17 00:09:30.228469"], ["updated_at", "2017-09-17 00:09:30.228469"]]
  [1m[35m (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 2], ["friend_id", 3], ["created_at", "2017-09-17 00:09:30.233965"], ["updated_at", "2017-09-17 00:09:30.233965"]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 3], ["friend_id", 2], ["created_at", "2017-09-17 00:09:30.240767"], ["updated_at", "2017-09-17 00:09:30.240767"]]
  [1m[35m (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mFriendship Load (1.2ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships"[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Started POST "/api/users?user[session_token]=EAAY5MI6sEZCgBAFXOLQelcY40ykhA3kkBsaqcZAAZAhbZBM0a2SiNNjNHcUy5bZCpQMcLmaQxxXTDVGpQUGx4AWUVEV5a57HOAonKVl590ALDLPScRcxXw7ZBRWNjvtkZAOwhHKJjbUyZB35ziyZAkZA4JWotuYVdOM9ihXxm9JJSqoveLvWnZBnMQ8Nv9KBf0FApdkZAGnsZALZB8eMGcseBCD95q" for 127.0.0.1 at 2017-09-16 17:09:56 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAFXOLQelcY40ykhA3kkBsaqcZAAZAhbZBM0a2SiNNjNHcUy5bZCpQMcLmaQxxXTDVGpQUGx4AWUVEV5a57HOAonKVl590ALDLPScRcxXw7ZBRWNjvtkZAOwhHKJjbUyZB35ziyZAkZA4JWotuYVdOM9ihXxm9JJSqoveLvWnZBnMQ8Nv9KBf0FApdkZAGnsZALZB8eMGcseBCD95q"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "1683815938304369"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 468ms (ActiveRecord: 0.5ms)



NoMethodError - undefined method `id' for nil:NilClass:
  app/models/user.rb:24:in `block in add_friends'
  app/models/user.rb:24:in `add_friends'
  app/models/user.rb:14:in `fill_user_data'
  app/controllers/api/users_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?user[session_token]=EAAY5MI6sEZCgBAFXOLQelcY40ykhA3kkBsaqcZAAZAhbZBM0a2SiNNjNHcUy5bZCpQMcLmaQxxXTDVGpQUGx4AWUVEV5a57HOAonKVl590ALDLPScRcxXw7ZBRWNjvtkZAOwhHKJjbUyZB35ziyZAkZA4JWotuYVdOM9ihXxm9JJSqoveLvWnZBnMQ8Nv9KBf0FApdkZAGnsZALZB8eMGcseBCD95q" for 127.0.0.1 at 2017-09-16 17:15:50 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAFXOLQelcY40ykhA3kkBsaqcZAAZAhbZBM0a2SiNNjNHcUy5bZCpQMcLmaQxxXTDVGpQUGx4AWUVEV5a57HOAonKVl590ALDLPScRcxXw7ZBRWNjvtkZAOwhHKJjbUyZB35ziyZAkZA4JWotuYVdOM9ihXxm9JJSqoveLvWnZBnMQ8Nv9KBf0FApdkZAGnsZALZB8eMGcseBCD95q"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "1683815938304369"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at", "name", "pro_pic_url") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "10155757977328035"], ["session_token", "EAAY5MI6sEZCgBAFXOLQelcY40ykhA3kkBsaqcZAAZAhbZBM0a2SiNNjNHcUy5bZCpQMcLmaQxxXTDVGpQUGx4AWUVEV5a57HOAonKVl590ALDLPScRcxXw7ZBRWNjvtkZAOwhHKJjbUyZB35ziyZAkZA4JWotuYVdOM9ihXxm9JJSqoveLvWnZBnMQ8Nv9KBf0FApdkZAGnsZALZB8eMGcseBCD95q"], ["visible_radius", 5], ["created_at", "2017-09-17 00:15:50.810526"], ["updated_at", "2017-09-17 00:15:50.810526"], ["name", "Sachith Gullapalli"], ["pro_pic_url", "http://graph.facebook.com/10155757977328035/picture"]]
  [1m[35m (2.2ms)[0m  [1m[36mcommit transaction[0m
  Rendering api/users/show.json.jbuilder
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "friend_id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 4]]
  Rendered api/users/_user.json.jbuilder (19.2ms)
  Rendered api/users/show.json.jbuilder (20.4ms)
Completed 200 OK in 655ms (Views: 23.7ms | ActiveRecord: 5.6ms)


Started POST "/api/users?user[session_token]=EAAY5MI6sEZCgBAKllFa7kxf0O5RnZBDsFLPI9mmdUZC7jZBkE4Xcdvh9wf7kkoy3DBGdyMKARyZBZC7O3PdpIxWE4ea3FKJQcI20lyjMREr4iYDM6YoPBzKg3UsAyIRYIZBqTP1zr4Hp9L11TcejoOBXWLEdiF8Fm0nViEbUd6VEbbEv3QznUi052sPhm5RFmUtL1P2RnzOSwZDZD" for 127.0.0.1 at 2017-09-16 17:16:08 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAKllFa7kxf0O5RnZBDsFLPI9mmdUZC7jZBkE4Xcdvh9wf7kkoy3DBGdyMKARyZBZC7O3PdpIxWE4ea3FKJQcI20lyjMREr4iYDM6YoPBzKg3UsAyIRYIZBqTP1zr4Hp9L11TcejoOBXWLEdiF8Fm0nViEbUd6VEbbEv3QznUi052sPhm5RFmUtL1P2RnzOSwZDZD"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "10155757977328035"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 687ms (ActiveRecord: 0.9ms)



ActiveRecord::RecordInvalid - Validation failed: User must exist:
  activerecord (5.1.4) lib/active_record/validations.rb:78:in `raise_validation_error'
  activerecord (5.1.4) lib/active_record/validations.rb:50:in `save!'
  activerecord (5.1.4) lib/active_record/attribute_methods/dirty.rb:43:in `save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `block in save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:384:in `block in with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `block in transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:194:in `block in within_new_transaction'
  /Users/tommy/.rbenv/versions/2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:191:in `within_new_transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:210:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:381:in `with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `save!'
  activerecord (5.1.4) lib/active_record/suppressor.rb:46:in `save!'
  activerecord (5.1.4) lib/active_record/persistence.rb:51:in `create!'
  app/models/user.rb:29:in `block in add_friends'
  app/models/user.rb:26:in `add_friends'
  app/models/user.rb:14:in `fill_user_data'
  app/controllers/api/users_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?user[session_token]=EAAY5MI6sEZCgBAKllFa7kxf0O5RnZBDsFLPI9mmdUZC7jZBkE4Xcdvh9wf7kkoy3DBGdyMKARyZBZC7O3PdpIxWE4ea3FKJQcI20lyjMREr4iYDM6YoPBzKg3UsAyIRYIZBqTP1zr4Hp9L11TcejoOBXWLEdiF8Fm0nViEbUd6VEbbEv3QznUi052sPhm5RFmUtL1P2RnzOSwZDZD" for 127.0.0.1 at 2017-09-16 17:17:09 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAKllFa7kxf0O5RnZBDsFLPI9mmdUZC7jZBkE4Xcdvh9wf7kkoy3DBGdyMKARyZBZC7O3PdpIxWE4ea3FKJQcI20lyjMREr4iYDM6YoPBzKg3UsAyIRYIZBqTP1zr4Hp9L11TcejoOBXWLEdiF8Fm0nViEbUd6VEbbEv3QznUi052sPhm5RFmUtL1P2RnzOSwZDZD"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "10155757977328035"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 713ms (ActiveRecord: 1.6ms)



ActiveRecord::RecordInvalid - Validation failed: User must exist:
  activerecord (5.1.4) lib/active_record/validations.rb:78:in `raise_validation_error'
  activerecord (5.1.4) lib/active_record/validations.rb:50:in `save!'
  activerecord (5.1.4) lib/active_record/attribute_methods/dirty.rb:43:in `save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `block in save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:384:in `block in with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `block in transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:194:in `block in within_new_transaction'
  /Users/tommy/.rbenv/versions/2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:191:in `within_new_transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:210:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:381:in `with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `save!'
  activerecord (5.1.4) lib/active_record/suppressor.rb:46:in `save!'
  activerecord (5.1.4) lib/active_record/persistence.rb:51:in `create!'
  app/models/user.rb:29:in `block in add_friends'
  app/models/user.rb:26:in `add_friends'
  app/models/user.rb:14:in `fill_user_data'
  app/controllers/api/users_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?user[session_token]=EAAY5MI6sEZCgBAKllFa7kxf0O5RnZBDsFLPI9mmdUZC7jZBkE4Xcdvh9wf7kkoy3DBGdyMKARyZBZC7O3PdpIxWE4ea3FKJQcI20lyjMREr4iYDM6YoPBzKg3UsAyIRYIZBqTP1zr4Hp9L11TcejoOBXWLEdiF8Fm0nViEbUd6VEbbEv3QznUi052sPhm5RFmUtL1P2RnzOSwZDZD" for 127.0.0.1 at 2017-09-16 17:17:39 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAKllFa7kxf0O5RnZBDsFLPI9mmdUZC7jZBkE4Xcdvh9wf7kkoy3DBGdyMKARyZBZC7O3PdpIxWE4ea3FKJQcI20lyjMREr4iYDM6YoPBzKg3UsAyIRYIZBqTP1zr4Hp9L11TcejoOBXWLEdiF8Fm0nViEbUd6VEbbEv3QznUi052sPhm5RFmUtL1P2RnzOSwZDZD"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "10155757977328035"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 552ms (ActiveRecord: 1.7ms)



ActiveRecord::RecordInvalid - Validation failed: User must exist:
  activerecord (5.1.4) lib/active_record/validations.rb:78:in `raise_validation_error'
  activerecord (5.1.4) lib/active_record/validations.rb:50:in `save!'
  activerecord (5.1.4) lib/active_record/attribute_methods/dirty.rb:43:in `save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `block in save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:384:in `block in with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `block in transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:194:in `block in within_new_transaction'
  /Users/tommy/.rbenv/versions/2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:191:in `within_new_transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:210:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:381:in `with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `save!'
  activerecord (5.1.4) lib/active_record/suppressor.rb:46:in `save!'
  activerecord (5.1.4) lib/active_record/persistence.rb:51:in `create!'
  app/models/user.rb:30:in `block in add_friends'
  app/models/user.rb:27:in `add_friends'
  app/models/user.rb:14:in `fill_user_data'
  app/controllers/api/users_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?user[session_token]=EAAY5MI6sEZCgBAKllFa7kxf0O5RnZBDsFLPI9mmdUZC7jZBkE4Xcdvh9wf7kkoy3DBGdyMKARyZBZC7O3PdpIxWE4ea3FKJQcI20lyjMREr4iYDM6YoPBzKg3UsAyIRYIZBqTP1zr4Hp9L11TcejoOBXWLEdiF8Fm0nViEbUd6VEbbEv3QznUi052sPhm5RFmUtL1P2RnzOSwZDZD" for 127.0.0.1 at 2017-09-16 17:18:18 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAKllFa7kxf0O5RnZBDsFLPI9mmdUZC7jZBkE4Xcdvh9wf7kkoy3DBGdyMKARyZBZC7O3PdpIxWE4ea3FKJQcI20lyjMREr4iYDM6YoPBzKg3UsAyIRYIZBqTP1zr4Hp9L11TcejoOBXWLEdiF8Fm0nViEbUd6VEbbEv3QznUi052sPhm5RFmUtL1P2RnzOSwZDZD"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "10155757977328035"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 43374ms (ActiveRecord: 2.0ms)



ActiveRecord::RecordInvalid - Validation failed: User must exist:
  activerecord (5.1.4) lib/active_record/validations.rb:78:in `raise_validation_error'
  activerecord (5.1.4) lib/active_record/validations.rb:50:in `save!'
  activerecord (5.1.4) lib/active_record/attribute_methods/dirty.rb:43:in `save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `block in save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:384:in `block in with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `block in transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:194:in `block in within_new_transaction'
  /Users/tommy/.rbenv/versions/2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:191:in `within_new_transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:210:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:381:in `with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `save!'
  activerecord (5.1.4) lib/active_record/suppressor.rb:46:in `save!'
  activerecord (5.1.4) lib/active_record/persistence.rb:51:in `create!'
  app/models/user.rb:29:in `block in add_friends'
  app/models/user.rb:26:in `add_friends'
  app/models/user.rb:14:in `fill_user_data'
  app/controllers/api/users_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?user[session_token]=EAAY5MI6sEZCgBAKllFa7kxf0O5RnZBDsFLPI9mmdUZC7jZBkE4Xcdvh9wf7kkoy3DBGdyMKARyZBZC7O3PdpIxWE4ea3FKJQcI20lyjMREr4iYDM6YoPBzKg3UsAyIRYIZBqTP1zr4Hp9L11TcejoOBXWLEdiF8Fm0nViEbUd6VEbbEv3QznUi052sPhm5RFmUtL1P2RnzOSwZDZD" for 127.0.0.1 at 2017-09-16 17:19:04 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAKllFa7kxf0O5RnZBDsFLPI9mmdUZC7jZBkE4Xcdvh9wf7kkoy3DBGdyMKARyZBZC7O3PdpIxWE4ea3FKJQcI20lyjMREr4iYDM6YoPBzKg3UsAyIRYIZBqTP1zr4Hp9L11TcejoOBXWLEdiF8Fm0nViEbUd6VEbbEv3QznUi052sPhm5RFmUtL1P2RnzOSwZDZD"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "10155757977328035"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 2358ms (ActiveRecord: 1.9ms)



ActiveRecord::RecordInvalid - Validation failed: User must exist:
  activerecord (5.1.4) lib/active_record/validations.rb:78:in `raise_validation_error'
  activerecord (5.1.4) lib/active_record/validations.rb:50:in `save!'
  activerecord (5.1.4) lib/active_record/attribute_methods/dirty.rb:43:in `save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `block in save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:384:in `block in with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `block in transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:194:in `block in within_new_transaction'
  /Users/tommy/.rbenv/versions/2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:191:in `within_new_transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:210:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:381:in `with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `save!'
  activerecord (5.1.4) lib/active_record/suppressor.rb:46:in `save!'
  activerecord (5.1.4) lib/active_record/persistence.rb:51:in `create!'
  app/models/user.rb:29:in `block in add_friends'
  app/models/user.rb:26:in `add_friends'
  app/models/user.rb:14:in `fill_user_data'
  app/controllers/api/users_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?user[session_token]=EAAY5MI6sEZCgBAKllFa7kxf0O5RnZBDsFLPI9mmdUZC7jZBkE4Xcdvh9wf7kkoy3DBGdyMKARyZBZC7O3PdpIxWE4ea3FKJQcI20lyjMREr4iYDM6YoPBzKg3UsAyIRYIZBqTP1zr4Hp9L11TcejoOBXWLEdiF8Fm0nViEbUd6VEbbEv3QznUi052sPhm5RFmUtL1P2RnzOSwZDZD" for 127.0.0.1 at 2017-09-16 17:19:09 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAKllFa7kxf0O5RnZBDsFLPI9mmdUZC7jZBkE4Xcdvh9wf7kkoy3DBGdyMKARyZBZC7O3PdpIxWE4ea3FKJQcI20lyjMREr4iYDM6YoPBzKg3UsAyIRYIZBqTP1zr4Hp9L11TcejoOBXWLEdiF8Fm0nViEbUd6VEbbEv3QznUi052sPhm5RFmUtL1P2RnzOSwZDZD"}}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "10155757977328035"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 105326ms (ActiveRecord: 2.0ms)



ActiveRecord::RecordInvalid - Validation failed: User must exist:
  activerecord (5.1.4) lib/active_record/validations.rb:78:in `raise_validation_error'
  activerecord (5.1.4) lib/active_record/validations.rb:50:in `save!'
  activerecord (5.1.4) lib/active_record/attribute_methods/dirty.rb:43:in `save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `block in save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:384:in `block in with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `block in transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:194:in `block in within_new_transaction'
  /Users/tommy/.rbenv/versions/2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:191:in `within_new_transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:210:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:381:in `with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `save!'
  activerecord (5.1.4) lib/active_record/suppressor.rb:46:in `save!'
  activerecord (5.1.4) lib/active_record/persistence.rb:51:in `create!'
  app/models/user.rb:29:in `block in add_friends'
  app/models/user.rb:26:in `add_friends'
  app/models/user.rb:14:in `fill_user_data'
  app/controllers/api/users_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?user[session_token]=EAAY5MI6sEZCgBAKllFa7kxf0O5RnZBDsFLPI9mmdUZC7jZBkE4Xcdvh9wf7kkoy3DBGdyMKARyZBZC7O3PdpIxWE4ea3FKJQcI20lyjMREr4iYDM6YoPBzKg3UsAyIRYIZBqTP1zr4Hp9L11TcejoOBXWLEdiF8Fm0nViEbUd6VEbbEv3QznUi052sPhm5RFmUtL1P2RnzOSwZDZD" for 127.0.0.1 at 2017-09-16 17:20:58 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAKllFa7kxf0O5RnZBDsFLPI9mmdUZC7jZBkE4Xcdvh9wf7kkoy3DBGdyMKARyZBZC7O3PdpIxWE4ea3FKJQcI20lyjMREr4iYDM6YoPBzKg3UsAyIRYIZBqTP1zr4Hp9L11TcejoOBXWLEdiF8Fm0nViEbUd6VEbbEv3QznUi052sPhm5RFmUtL1P2RnzOSwZDZD"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "10155757977328035"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 200745ms (ActiveRecord: 0.5ms)



ActiveRecord::RecordInvalid - Validation failed: User must exist:
  activerecord (5.1.4) lib/active_record/validations.rb:78:in `raise_validation_error'
  activerecord (5.1.4) lib/active_record/validations.rb:50:in `save!'
  activerecord (5.1.4) lib/active_record/attribute_methods/dirty.rb:43:in `save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `block in save!'
  activerecord (5.1.4) lib/active_record/transactions.rb:384:in `block in with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `block in transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:194:in `block in within_new_transaction'
  /Users/tommy/.rbenv/versions/2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/transaction.rb:191:in `within_new_transaction'
  activerecord (5.1.4) lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:210:in `transaction'
  activerecord (5.1.4) lib/active_record/transactions.rb:381:in `with_transaction_returning_status'
  activerecord (5.1.4) lib/active_record/transactions.rb:313:in `save!'
  activerecord (5.1.4) lib/active_record/suppressor.rb:46:in `save!'
  activerecord (5.1.4) lib/active_record/persistence.rb:51:in `create!'
  app/models/user.rb:29:in `block in add_friends'
  app/models/user.rb:26:in `add_friends'
  app/models/user.rb:14:in `fill_user_data'
  app/controllers/api/users_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?user[session_token]=EAAY5MI6sEZCgBAKllFa7kxf0O5RnZBDsFLPI9mmdUZC7jZBkE4Xcdvh9wf7kkoy3DBGdyMKARyZBZC7O3PdpIxWE4ea3FKJQcI20lyjMREr4iYDM6YoPBzKg3UsAyIRYIZBqTP1zr4Hp9L11TcejoOBXWLEdiF8Fm0nViEbUd6VEbbEv3QznUi052sPhm5RFmUtL1P2RnzOSwZDZD" for 127.0.0.1 at 2017-09-16 17:24:22 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAKllFa7kxf0O5RnZBDsFLPI9mmdUZC7jZBkE4Xcdvh9wf7kkoy3DBGdyMKARyZBZC7O3PdpIxWE4ea3FKJQcI20lyjMREr4iYDM6YoPBzKg3UsAyIRYIZBqTP1zr4Hp9L11TcejoOBXWLEdiF8Fm0nViEbUd6VEbbEv3QznUi052sPhm5RFmUtL1P2RnzOSwZDZD"}}
Completed 500 Internal Server Error in 72ms (ActiveRecord: 0.5ms)



NoMethodError - undefined method `session_token' for #<Api::UsersController:0x007fd85c43a0d0>
Did you mean?  session:
  app/controllers/api/users_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/users?user[session_token]=EAAY5MI6sEZCgBAKllFa7kxf0O5RnZBDsFLPI9mmdUZC7jZBkE4Xcdvh9wf7kkoy3DBGdyMKARyZBZC7O3PdpIxWE4ea3FKJQcI20lyjMREr4iYDM6YoPBzKg3UsAyIRYIZBqTP1zr4Hp9L11TcejoOBXWLEdiF8Fm0nViEbUd6VEbbEv3QznUi052sPhm5RFmUtL1P2RnzOSwZDZD" for 127.0.0.1 at 2017-09-16 17:26:16 -0700
Processing by Api::UsersController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAKllFa7kxf0O5RnZBDsFLPI9mmdUZC7jZBkE4Xcdvh9wf7kkoy3DBGdyMKARyZBZC7O3PdpIxWE4ea3FKJQcI20lyjMREr4iYDM6YoPBzKg3UsAyIRYIZBqTP1zr4Hp9L11TcejoOBXWLEdiF8Fm0nViEbUd6VEbbEv3QznUi052sPhm5RFmUtL1P2RnzOSwZDZD"}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at", "name", "pro_pic_url") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "1683815938304369"], ["session_token", "EAAY5MI6sEZCgBAKllFa7kxf0O5RnZBDsFLPI9mmdUZC7jZBkE4Xcdvh9wf7kkoy3DBGdyMKARyZBZC7O3PdpIxWE4ea3FKJQcI20lyjMREr4iYDM6YoPBzKg3UsAyIRYIZBqTP1zr4Hp9L11TcejoOBXWLEdiF8Fm0nViEbUd6VEbbEv3QznUi052sPhm5RFmUtL1P2RnzOSwZDZD"], ["visible_radius", 5], ["created_at", "2017-09-17 00:26:16.514842"], ["updated_at", "2017-09-17 00:26:16.514842"], ["name", "Tommy Kilmer"], ["pro_pic_url", "http://graph.facebook.com/1683815938304369/picture"]]
  [1m[35m (2.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "10155757977328035"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 5], ["friend_id", 4], ["created_at", "2017-09-17 00:26:19.319748"], ["updated_at", "2017-09-17 00:26:19.319748"]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 4], ["friend_id", 5], ["created_at", "2017-09-17 00:26:19.324043"], ["updated_at", "2017-09-17 00:26:19.324043"]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  Rendering api/users/show.json.jbuilder
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "friend_id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 5]]
  Rendered api/users/_user.json.jbuilder (3.8ms)
  Rendered api/users/show.json.jbuilder (6.0ms)
Completed 200 OK in 3096ms (Views: 10.0ms | ActiveRecord: 8.8ms)


  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 5]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 4]]
Started GET "/" for 67.169.71.210 at 2017-09-16 17:58:23 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/tommy/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/railties-5.1.4/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/tommy/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/railties-5.1.4/lib/rails/templates/rails/welcome/index.html.erb (2.4ms)
Completed 200 OK in 6ms (Views: 4.3ms)


  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:03:36 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"user"=>{"session_token"=>"sessiontoken"}}
Completed 500 Internal Server Error in 181ms


  
Koala::Facebook::AuthenticationError (type: OAuthException, code: 190, message: Invalid OAuth access token., x-fb-trace-id: AO5Vb5H1+2Z [HTTP 400]):
  
app/controllers/api/sessions_controller.rb:19:in `current_user'
app/controllers/api/sessions_controller.rb:4:in `create'
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:08:09 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAF4wAfd9zEYeTcGYbpjvwCa3L02awpSXe1U3U15MZABa6293TCbwDUBZANZAlaiMeDBGxwsqFR6CLYl7UYLRi2CJC8ipET8ZCtm8y801uOQ12vy2hGKGQZCyizhAhQSNWSjfCOAQ1pahFgCigAlEzlMRR09sCqReEkpcAQXyN418BSBbTwf3RoYeoXJRpGwZDZD", "facebook_id"=>"1683815938304369"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "1683815938304369"], ["LIMIT", 1]]
No template found for Api::SessionsController#create, rendering head :no_content
Completed 204 No Content in 53ms (ActiveRecord: 1.7ms)


  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:09:31 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAF4wAfd9zEYeTcGYbpjvwCa3L02awpSXe1U3U15MZABa6293TCbwDUBZANZAlaiMeDBGxwsqFR6CLYl7UYLRi2CJC8ipET8ZCtm8y801uOQ12vy2hGKGQZCyizhAhQSNWSjfCOAQ1pahFgCigAlEzlMRR09sCqReEkpcAQXyN418BSBbTwf3RoYeoXJRpGwZDZD", "facebook_id"=>"1683815938304369"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "1683815938304369"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "session_token" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["session_token", nil], ["updated_at", "2017-09-17 01:09:31.444017"], ["id", 5]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 15ms (ActiveRecord: 1.7ms)


  
ActiveRecord::NotNullViolation (SQLite3::ConstraintException: NOT NULL constraint failed: users.session_token: UPDATE "users" SET "session_token" = ?, "updated_at" = ? WHERE "users"."id" = ?):
  
app/controllers/api/sessions_controller.rb:7:in `create'
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:09:53 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAF4wAfd9zEYeTcGYbpjvwCa3L02awpSXe1U3U15MZABa6293TCbwDUBZANZAlaiMeDBGxwsqFR6CLYl7UYLRi2CJC8ipET8ZCtm8y801uOQ12vy2hGKGQZCyizhAhQSNWSjfCOAQ1pahFgCigAlEzlMRR09sCqReEkpcAQXyN418BSBbTwf3RoYeoXJRpGwZDZD", "facebook_id"=>"1683815938304369"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "1683815938304369"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "session_token" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["session_token", "EAAY5MI6sEZCgBAF4wAfd9zEYeTcGYbpjvwCa3L02awpSXe1U3U15MZABa6293TCbwDUBZANZAlaiMeDBGxwsqFR6CLYl7UYLRi2CJC8ipET8ZCtm8y801uOQ12vy2hGKGQZCyizhAhQSNWSjfCOAQ1pahFgCigAlEzlMRR09sCqReEkpcAQXyN418BSBbTwf3RoYeoXJRpGwZDZD"], ["updated_at", "2017-09-17 01:09:53.374222"], ["id", 5]]
  [1m[35m (2.3ms)[0m  [1m[36mcommit transaction[0m
No template found for Api::SessionsController#create, rendering head :no_content
Completed 204 No Content in 56ms (ActiveRecord: 3.4ms)


  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:11:46 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"user"=>{"session_token"=>"asdf", "facebook_id"=>"1683815938304369"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "1683815938304369"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "session_token" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["session_token", "asdf"], ["updated_at", "2017-09-17 01:11:46.558495"], ["id", 5]]
  [1m[35m (2.2ms)[0m  [1m[36mcommit transaction[0m
No template found for Api::SessionsController#create, rendering head :no_content
Completed 204 No Content in 78ms (ActiveRecord: 3.3ms)


  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:17:56 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"user"=>{"session_token"=>"hello", "facebook_id"=>"1683815938304369"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "1683815938304369"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "session_token" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["session_token", "hello"], ["updated_at", "2017-09-17 01:17:56.238214"], ["id", 5]]
  [1m[35m (2.3ms)[0m  [1m[36mcommit transaction[0m
No template found for Api::SessionsController#create, rendering head :no_content
Completed 204 No Content in 70ms (ActiveRecord: 3.5ms)


Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:18:34 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"user"=>{"session_token"=>"hello", "facebook_id"=>"0"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "0"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 64ms (ActiveRecord: 0.1ms)


  
NoMethodError (undefined method `api_users' for #<Api::SessionsController:0x007fd860843ab0>
Did you mean?  api_users_url):
  
app/controllers/api/sessions_controller.rb:9:in `create'
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:19:14 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"user"=>{"session_token"=>"hello", "facebook_id"=>"0"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "0"], ["LIMIT", 1]]
Redirected to http://7bf94d8e.ngrok.io/api/users?action=create&controller=api%2Fsessions&format=json&user%5Bfacebook_id%5D=0&user%5Bsession_token%5D=hello
Completed 302 Found in 6ms (ActiveRecord: 0.5ms)


Started GET "/api/users?action=create&controller=api%2Fsessions&format=json&user%5Bfacebook_id%5D=0&user%5Bsession_token%5D=hello" for 67.169.71.210 at 2017-09-16 18:19:14 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
  
ActionController::RoutingError (No route matches [GET] "/api/users"):
  
actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.5.1) lib/web_console/middleware.rb:20:in `block in call'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/method_override.rb:22:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.1.4) lib/rails/engine.rb:522:in `call'
puma (3.10.0) lib/puma/configuration.rb:225:in `call'
puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
puma (3.10.0) lib/puma/server.rb:437:in `process_client'
puma (3.10.0) lib/puma/server.rb:301:in `block in run'
puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "friendships" WHERE "friendships"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35m (2.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "friendships" WHERE "friendships"."id" = ?[0m  [["id", 3]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35m (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ?[0m  [["user_id", 3]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "friendships" WHERE "friendships"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "friendships" WHERE "friendships"."id" = ?[0m  [["id", 4]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ?[0m  [["user_id", 4]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "friendships" WHERE "friendships"."id" = ?[0m  [["id", 6]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 4]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ?[0m  [["user_id", 5]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "friendships" WHERE "friendships"."id" = ?[0m  [["id", 5]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 5]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mLocation Load (0.4ms)[0m  [1m[34mSELECT "locations".* FROM "locations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 2]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mFriendship Load (0.4ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships"[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations"[0m
  [1m[36mFriendship Load (0.2ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships"[0m
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:24:11 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session"=>{}}
Completed 500 Internal Server Error in 1ms


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/api/sessions_controller.rb:27:in `current_user'
app/controllers/api/sessions_controller.rb:4:in `create'
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:24:52 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session"=>{}}
Completed 500 Internal Server Error in 1ms


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/api/sessions_controller.rb:27:in `current_user'
app/controllers/api/sessions_controller.rb:4:in `create'
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:25:08 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session"=>{}}
Completed 500 Internal Server Error in 2ms


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/api/sessions_controller.rb:27:in `current_user'
app/controllers/api/sessions_controller.rb:4:in `create'
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:25:19 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session"=>{}}
Completed 500 Internal Server Error in 2ms


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/api/sessions_controller.rb:27:in `current_user'
app/controllers/api/sessions_controller.rb:4:in `create'
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:25:35 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session"=>{}}
Completed 500 Internal Server Error in 2ms


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/api/sessions_controller.rb:27:in `current_user'
app/controllers/api/sessions_controller.rb:4:in `create'
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:27:01 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session"=>{}}
Completed 500 Internal Server Error in 1ms


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/api/sessions_controller.rb:27:in `current_user'
app/controllers/api/sessions_controller.rb:4:in `create'
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:27:12 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session"=>{}}
Completed 500 Internal Server Error in 2ms


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/api/sessions_controller.rb:27:in `current_user'
app/controllers/api/sessions_controller.rb:4:in `create'
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:27:39 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::SessionsController#create as JSON
  Parameters: {"session"=>{}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/api/sessions_controller.rb:27:in `current_user'
app/controllers/api/sessions_controller.rb:4:in `create'
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:30:42 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"user"=>{"session_token"=>"EAAY5MI6sEZCgBAF4wAfd9zEYeTcGYbpjvwCa3L02awpSXe1U3U15MZABa6293TCbwDUBZANZAlaiMeDBGxwsqFR6CLYl7UYLRi2CJC8ipET8ZCtm8y801uOQ12vy2hGKGQZCyizhAhQSNWSjfCOAQ1pahFgCigAlEzlMRR09sCqReEkpcAQXyN418BSBbTwf3RoYeoXJRpGwZDZD", "facebook_id"=>"1683815938304369"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "1683815938304369"], ["LIMIT", 1]]
Unpermitted parameter: :facebook_id
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at", "name", "pro_pic_url") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "1683815938304369"], ["session_token", "EAAY5MI6sEZCgBAF4wAfd9zEYeTcGYbpjvwCa3L02awpSXe1U3U15MZABa6293TCbwDUBZANZAlaiMeDBGxwsqFR6CLYl7UYLRi2CJC8ipET8ZCtm8y801uOQ12vy2hGKGQZCyizhAhQSNWSjfCOAQ1pahFgCigAlEzlMRR09sCqReEkpcAQXyN418BSBbTwf3RoYeoXJRpGwZDZD"], ["visible_radius", 5], ["created_at", "2017-09-17 01:30:42.532087"], ["updated_at", "2017-09-17 01:30:42.532087"], ["name", "Tommy Kilmer"], ["pro_pic_url", "http://graph.facebook.com/1683815938304369/picture"]]
  [1m[35m (2.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "10155757977328035"], ["LIMIT", 1]]
  Rendering api/users/show.json.jbuilder
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "friend_id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 6]]
  Rendered api/users/_user.json.jbuilder (21.8ms)
  Rendered api/users/show.json.jbuilder (24.0ms)
Completed 200 OK in 15825ms (Views: 28.7ms | ActiveRecord: 5.0ms)


Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:31:29 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"user"=>{"session_token"=>"asdf", "facebook_id"=>"1683815938304369"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "1683815938304369"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "session_token" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["session_token", "asdf"], ["updated_at", "2017-09-17 01:31:39.596858"], ["id", 6]]
  [1m[35m (1.8ms)[0m  [1m[36mcommit transaction[0m
No template found for Api::SessionsController#create, rendering head :no_content
Completed 204 No Content in 67ms (ActiveRecord: 3.0ms)


  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Started POST "/api/session" for 127.0.0.1 at 2017-09-16 18:36:07 -0700
Processing by Api::SessionsController#create as JSON
  Parameters: {"{\"user"=>{"session_token"=>{"\": \"123\", \"user"=>{"facebook_id"=>{"\": \"123\"}"=>nil}}}}}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)



NoMethodError - undefined method `[]' for nil:NilClass:
  app/controllers/api/sessions_controller.rb:27:in `current_user'
  app/controllers/api/sessions_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/session" for 127.0.0.1 at 2017-09-16 18:38:26 -0700
Processing by Api::SessionsController#create as JSON
  Parameters: {"{\"user"=>{"session_token"=>{"\": \"123\", \"user"=>{"facebook_id"=>{"\": \"123\"}"=>nil}}}}}
Completed 500 Internal Server Error in 2ms



NoMethodError - undefined method `[]' for nil:NilClass:
  app/controllers/api/sessions_controller.rb:28:in `current_user'
  app/controllers/api/sessions_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/session" for 127.0.0.1 at 2017-09-16 18:38:45 -0700
Processing by Api::SessionsController#create as JSON
  Parameters: {"{\"user"=>{"session_token"=>{"\": \"123\", \"user"=>{"facebook_id"=>{"\": \"123\"}"=>nil}}}}}
Completed 500 Internal Server Error in 2ms



NoMethodError - undefined method `[]' for nil:NilClass:
  app/controllers/api/sessions_controller.rb:28:in `current_user'
  app/controllers/api/sessions_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/session" for 127.0.0.1 at 2017-09-16 18:39:06 -0700
Processing by Api::SessionsController#create as JSON
  Parameters: {"{\"user"=>{"session_token"=>{"\": \"123\", \"user"=>{"facebook_id"=>{"\": \"123\"}"=>nil}}}}}
Completed 500 Internal Server Error in 2ms



NoMethodError - undefined method `[]' for nil:NilClass:
  app/controllers/api/sessions_controller.rb:29:in `current_user'
  app/controllers/api/sessions_controller.rb:4:in `create'
  actionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'
  actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
  activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
  actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
  activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
  actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
  actionview (5.1.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
  actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
  actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
  actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
  rack (2.0.3) lib/rack/etag.rb:25:in `call'
  rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.3) lib/rack/head.rb:12:in `call'
  rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
  rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
  activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
  actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
  web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
  rack (2.0.3) lib/rack/method_override.rb:22:in `call'
  rack (2.0.3) lib/rack/runtime.rb:22:in `call'
  activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
  rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
  railties (5.1.4) lib/rails/engine.rb:522:in `call'
  puma (3.10.0) lib/puma/configuration.rb:225:in `call'
  puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
  puma (3.10.0) lib/puma/server.rb:437:in `process_client'
  puma (3.10.0) lib/puma/server.rb:301:in `block in run'
  puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:39:44 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session"=>{}}
Completed 500 Internal Server Error in 3ms


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/api/sessions_controller.rb:29:in `current_user'
app/controllers/api/sessions_controller.rb:4:in `create'
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:42:03 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session_token"=>"asdf", "facebook_id"=>"168381593830"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "168381593830"], ["LIMIT", 1]]
Completed 400 Bad Request in 6ms (ActiveRecord: 0.4ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: user):
  
app/controllers/api/sessions_controller.rb:35:in `user_params'
app/controllers/api/sessions_controller.rb:14:in `make_user'
app/controllers/api/sessions_controller.rb:9:in `create'
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:42:16 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session_token"=>"asdf", "facebook_id"=>"168381593830"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "168381593830"], ["LIMIT", 1]]
Unpermitted parameters: :facebook_id, :format
Completed 500 Internal Server Error in 143ms (ActiveRecord: 0.8ms)


  
Koala::Facebook::AuthenticationError (type: OAuthException, code: 190, message: Invalid OAuth access token., x-fb-trace-id: EBb1scGCzFA [HTTP 400]):
  
app/models/user.rb:9:in `fill_user_data'
app/controllers/api/sessions_controller.rb:16:in `make_user'
app/controllers/api/sessions_controller.rb:9:in `create'
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:42:29 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session_token"=>"EAAY5MI6sEZCgBAF4wAfd9zEYeTcGYbpjvwCa3L02awpSXe1U3U15MZABa6293TCbwDUBZANZAlaiMeDBGxwsqFR6CLYl7UYLRi2CJC8ipET8ZCtm8y801uOQ12vy2hGKGQZCyizhAhQSNWSjfCOAQ1pahFgCigAlEzlMRR09sCqReEkpcAQXyN418BSBbTwf3RoYeoXJRpGwZDZD", "facebook_id"=>"168381593830"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "168381593830"], ["LIMIT", 1]]
Unpermitted parameters: :facebook_id, :format
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at", "name", "pro_pic_url") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "1683815938304369"], ["session_token", "EAAY5MI6sEZCgBAF4wAfd9zEYeTcGYbpjvwCa3L02awpSXe1U3U15MZABa6293TCbwDUBZANZAlaiMeDBGxwsqFR6CLYl7UYLRi2CJC8ipET8ZCtm8y801uOQ12vy2hGKGQZCyizhAhQSNWSjfCOAQ1pahFgCigAlEzlMRR09sCqReEkpcAQXyN418BSBbTwf3RoYeoXJRpGwZDZD"], ["visible_radius", 5], ["created_at", "2017-09-17 01:42:29.776826"], ["updated_at", "2017-09-17 01:42:29.776826"], ["name", "Tommy Kilmer"], ["pro_pic_url", "http://graph.facebook.com/1683815938304369/picture"]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "10155757977328035"], ["LIMIT", 1]]
  Rendering api/users/show.json.jbuilder
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "friend_id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 7]]
  Rendered api/users/_user.json.jbuilder (7.7ms)
  Rendered api/users/show.json.jbuilder (8.5ms)
Completed 200 OK in 576ms (Views: 12.3ms | ActiveRecord: 1.9ms)


Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:42:39 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session_token"=>"asdf", "facebook_id"=>"168381593830"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "168381593830"], ["LIMIT", 1]]
Unpermitted parameters: :facebook_id, :format
Completed 500 Internal Server Error in 113ms (ActiveRecord: 0.2ms)


  
Koala::Facebook::AuthenticationError (type: OAuthException, code: 190, message: Invalid OAuth access token., x-fb-trace-id: GxAJknCWhHi [HTTP 400]):
  
app/models/user.rb:9:in `fill_user_data'
app/controllers/api/sessions_controller.rb:16:in `make_user'
app/controllers/api/sessions_controller.rb:9:in `create'
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:42:53 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session_token"=>"EAAY5MI6sEZCgBAF4wAfd9zEYeTcGYbpjvwCa3L02awpSXe1U3U15MZABa6293TCbwDUBZANZAlaiMeDBGxwsqFR6CLYl7UYLRi2CJC8ipET8ZCtm8y801uOQ12vy2hGKGQZCyizhAhQSNWSjfCOAQ1pahFgCigAlEzlMRR09sCqReEkpcAQXyN418BSBbTwf3RoYeoXJRpGwZDZD", "facebook_id"=>"168381593830"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "168381593830"], ["LIMIT", 1]]
Unpermitted parameters: :facebook_id, :format
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at", "name", "pro_pic_url") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "1683815938304369"], ["session_token", "EAAY5MI6sEZCgBAF4wAfd9zEYeTcGYbpjvwCa3L02awpSXe1U3U15MZABa6293TCbwDUBZANZAlaiMeDBGxwsqFR6CLYl7UYLRi2CJC8ipET8ZCtm8y801uOQ12vy2hGKGQZCyizhAhQSNWSjfCOAQ1pahFgCigAlEzlMRR09sCqReEkpcAQXyN418BSBbTwf3RoYeoXJRpGwZDZD"], ["visible_radius", 5], ["created_at", "2017-09-17 01:42:53.581900"], ["updated_at", "2017-09-17 01:42:53.581900"], ["name", "Tommy Kilmer"], ["pro_pic_url", "http://graph.facebook.com/1683815938304369/picture"]]
  [1m[35m (2.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "10155757977328035"], ["LIMIT", 1]]
  Rendering api/users/show.json.jbuilder
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "friend_id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 8]]
  Rendered api/users/_user.json.jbuilder (1.6ms)
  Rendered api/users/show.json.jbuilder (2.5ms)
Completed 200 OK in 499ms (Views: 6.5ms | ActiveRecord: 3.5ms)


Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:43:21 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session_token"=>"EAAY5MI6sEZCgBAKcH1aSmw8LTlaS8Tzevbqwxj0dZAKdCYdPKDXSUooGZCsClNqg2pKZCqBL1vn1PgVFfhnhd26v62pU6fvrZAxd4KvnU1LJoown9P1sqZAQugdqge5JL6hpkvWUABxL6ABrImwfgxN1LLS8ZCf8ZBm3VWGZBZB3cDUui6Hi0hL4cCU99kN0mC48VuZB8Ecjo15SgZDZD", "facebook_id"=>"168381593830"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "168381593830"], ["LIMIT", 1]]
Unpermitted parameters: :facebook_id, :format
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at", "name", "pro_pic_url") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "1683815938304369"], ["session_token", "EAAY5MI6sEZCgBAKcH1aSmw8LTlaS8Tzevbqwxj0dZAKdCYdPKDXSUooGZCsClNqg2pKZCqBL1vn1PgVFfhnhd26v62pU6fvrZAxd4KvnU1LJoown9P1sqZAQugdqge5JL6hpkvWUABxL6ABrImwfgxN1LLS8ZCf8ZBm3VWGZBZB3cDUui6Hi0hL4cCU99kN0mC48VuZB8Ecjo15SgZDZD"], ["visible_radius", 5], ["created_at", "2017-09-17 01:43:21.621430"], ["updated_at", "2017-09-17 01:43:21.621430"], ["name", "Tommy Kilmer"], ["pro_pic_url", "http://graph.facebook.com/1683815938304369/picture"]]
  [1m[35m (3.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "10155757977328035"], ["LIMIT", 1]]
  Rendering api/users/show.json.jbuilder
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "friend_id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 9]]
  Rendered api/users/_user.json.jbuilder (2.2ms)
  Rendered api/users/show.json.jbuilder (3.7ms)
Completed 200 OK in 475ms (Views: 6.9ms | ActiveRecord: 4.5ms)


  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:44:08 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session_token"=>"EAAY5MI6sEZCgBAKcH1aSmw8LTlaS8Tzevbqwxj0dZAKdCYdPKDXSUooGZCsClNqg2pKZCqBL1vn1PgVFfhnhd26v62pU6fvrZAxd4KvnU1LJoown9P1sqZAQugdqge5JL6hpkvWUABxL6ABrImwfgxN1LLS8ZCf8ZBm3VWGZBZB3cDUui6Hi0hL4cCU99kN0mC48VuZB8Ecjo15SgZDZD", "facebook_id"=>"168381593830"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "168381593830"], ["LIMIT", 1]]
Unpermitted parameters: :facebook_id, :format
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at", "name", "pro_pic_url") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "1683815938304369"], ["session_token", "EAAY5MI6sEZCgBAKcH1aSmw8LTlaS8Tzevbqwxj0dZAKdCYdPKDXSUooGZCsClNqg2pKZCqBL1vn1PgVFfhnhd26v62pU6fvrZAxd4KvnU1LJoown9P1sqZAQugdqge5JL6hpkvWUABxL6ABrImwfgxN1LLS8ZCf8ZBm3VWGZBZB3cDUui6Hi0hL4cCU99kN0mC48VuZB8Ecjo15SgZDZD"], ["visible_radius", 5], ["created_at", "2017-09-17 01:44:38.445032"], ["updated_at", "2017-09-17 01:44:38.445032"], ["name", "Tommy Kilmer"], ["pro_pic_url", "http://graph.facebook.com/1683815938304369/picture"]]
  [1m[35m (2.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "10155757977328035"], ["LIMIT", 1]]
  Rendering api/users/show.json.jbuilder
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "friend_id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 10]]
  Rendered api/users/_user.json.jbuilder (15.8ms)
  Rendered api/users/show.json.jbuilder (17.0ms)
Completed 200 OK in 30104ms (Views: 26.1ms | ActiveRecord: 4.7ms)


Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:44:41 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session_token"=>"EAAY5MI6sEZCgBAKcH1aSmw8LTlaS8Tzevbqwxj0dZAKdCYdPKDXSUooGZCsClNqg2pKZCqBL1vn1PgVFfhnhd26v62pU6fvrZAxd4KvnU1LJoown9P1sqZAQugdqge5JL6hpkvWUABxL6ABrImwfgxN1LLS8ZCf8ZBm3VWGZBZB3cDUui6Hi0hL4cCU99kN0mC48VuZB8Ecjo15SgZDZD", "facebook_id"=>"168381593830"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "168381593830"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "168381593830"], ["LIMIT", 1]]
Unpermitted parameters: :facebook_id, :format
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at", "name", "pro_pic_url") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "1683815938304369"], ["session_token", "EAAY5MI6sEZCgBAKcH1aSmw8LTlaS8Tzevbqwxj0dZAKdCYdPKDXSUooGZCsClNqg2pKZCqBL1vn1PgVFfhnhd26v62pU6fvrZAxd4KvnU1LJoown9P1sqZAQugdqge5JL6hpkvWUABxL6ABrImwfgxN1LLS8ZCf8ZBm3VWGZBZB3cDUui6Hi0hL4cCU99kN0mC48VuZB8Ecjo15SgZDZD"], ["visible_radius", 5], ["created_at", "2017-09-17 01:45:43.937647"], ["updated_at", "2017-09-17 01:45:43.937647"], ["name", "Tommy Kilmer"], ["pro_pic_url", "http://graph.facebook.com/1683815938304369/picture"]]
  [1m[35m (1.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "10155757977328035"], ["LIMIT", 1]]
  Rendering api/users/show.json.jbuilder
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "friend_id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 11]]
  Rendered api/users/_user.json.jbuilder (2.0ms)
  Rendered api/users/show.json.jbuilder (3.1ms)
Completed 200 OK in 62748ms (Views: 8.0ms | ActiveRecord: 4.0ms)


Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:46:12 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session_token"=>"EAAY5MI6sEZCgBAKcH1aSmw8LTlaS8Tzevbqwxj0dZAKdCYdPKDXSUooGZCsClNqg2pKZCqBL1vn1PgVFfhnhd26v62pU6fvrZAxd4KvnU1LJoown9P1sqZAQugdqge5JL6hpkvWUABxL6ABrImwfgxN1LLS8ZCf8ZBm3VWGZBZB3cDUui6Hi0hL4cCU99kN0mC48VuZB8Ecjo15SgZDZD", "facebook_id"=>"168381593830"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "168381593830"], ["LIMIT", 1]]
Unpermitted parameters: :facebook_id, :format
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at", "name", "pro_pic_url") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "1683815938304369"], ["session_token", "EAAY5MI6sEZCgBAKcH1aSmw8LTlaS8Tzevbqwxj0dZAKdCYdPKDXSUooGZCsClNqg2pKZCqBL1vn1PgVFfhnhd26v62pU6fvrZAxd4KvnU1LJoown9P1sqZAQugdqge5JL6hpkvWUABxL6ABrImwfgxN1LLS8ZCf8ZBm3VWGZBZB3cDUui6Hi0hL4cCU99kN0mC48VuZB8Ecjo15SgZDZD"], ["visible_radius", 5], ["created_at", "2017-09-17 01:46:12.409496"], ["updated_at", "2017-09-17 01:46:12.409496"], ["name", "Tommy Kilmer"], ["pro_pic_url", "http://graph.facebook.com/1683815938304369/picture"]]
  [1m[35m (2.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "10155757977328035"], ["LIMIT", 1]]
  Rendering api/users/show.json.jbuilder
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "friend_id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 12]]
  Rendered api/users/_user.json.jbuilder (1.7ms)
  Rendered api/users/show.json.jbuilder (2.8ms)
Completed 200 OK in 601ms (Views: 8.4ms | ActiveRecord: 3.5ms)


Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:46:16 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Unpermitted parameters: :format, :session
Completed 500 Internal Server Error in 1386ms (ActiveRecord: 0.2ms)


  
Koala::Facebook::AuthenticationError (type: OAuthException, code: 2500, message: An active access token must be used to query information about the current user., x-fb-trace-id: GkIIqfgtzDF [HTTP 400]):
  
app/models/user.rb:9:in `fill_user_data'
app/controllers/api/sessions_controller.rb:17:in `make_user'
app/controllers/api/sessions_controller.rb:10:in `create'
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:46:32 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session"=>{}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Unpermitted parameters: :format, :session
Completed 500 Internal Server Error in 113ms (ActiveRecord: 0.9ms)


  
Koala::Facebook::AuthenticationError (type: OAuthException, code: 2500, message: An active access token must be used to query information about the current user., x-fb-trace-id: GFqYPdrAIYB [HTTP 400]):
  
app/models/user.rb:9:in `fill_user_data'
app/controllers/api/sessions_controller.rb:16:in `make_user'
app/controllers/api/sessions_controller.rb:9:in `create'
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:46:44 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::SessionsController#create as JSON
  Parameters: {"session_token"=>"EAAY5MI6sEZCgBAKcH1aSmw8LTlaS8Tzevbqwxj0dZAKdCYdPKDXSUooGZCsClNqg2pKZCqBL1vn1PgVFfhnhd26v62pU6fvrZAxd4KvnU1LJoown9P1sqZAQugdqge5JL6hpkvWUABxL6ABrImwfgxN1LLS8ZCf8ZBm3VWGZBZB3cDUui6Hi0hL4cCU99kN0mC48VuZB8Ecjo15SgZDZD", "facebook_id"=>"168381593830"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "168381593830"], ["LIMIT", 1]]
Unpermitted parameters: :facebook_id, :format
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at", "name", "pro_pic_url") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "1683815938304369"], ["session_token", "EAAY5MI6sEZCgBAKcH1aSmw8LTlaS8Tzevbqwxj0dZAKdCYdPKDXSUooGZCsClNqg2pKZCqBL1vn1PgVFfhnhd26v62pU6fvrZAxd4KvnU1LJoown9P1sqZAQugdqge5JL6hpkvWUABxL6ABrImwfgxN1LLS8ZCf8ZBm3VWGZBZB3cDUui6Hi0hL4cCU99kN0mC48VuZB8Ecjo15SgZDZD"], ["visible_radius", 5], ["created_at", "2017-09-17 01:46:45.088454"], ["updated_at", "2017-09-17 01:46:45.088454"], ["name", "Tommy Kilmer"], ["pro_pic_url", "http://graph.facebook.com/1683815938304369/picture"]]
  [1m[35m (2.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "10155757977328035"], ["LIMIT", 1]]
  Rendering api/users/show.json.jbuilder
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "friend_id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 13]]
  Rendered api/users/_user.json.jbuilder (19.6ms)
  Rendered api/users/show.json.jbuilder (22.0ms)
Completed 200 OK in 633ms (Views: 26.9ms | ActiveRecord: 4.5ms)


Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:46:50 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session_token"=>"EAAY5MI6sEZCgBAKcH1aSmw8LTlaS8Tzevbqwxj0dZAKdCYdPKDXSUooGZCsClNqg2pKZCqBL1vn1PgVFfhnhd26v62pU6fvrZAxd4KvnU1LJoown9P1sqZAQugdqge5JL6hpkvWUABxL6ABrImwfgxN1LLS8ZCf8ZBm3VWGZBZB3cDUui6Hi0hL4cCU99kN0mC48VuZB8Ecjo15SgZDZD", "facebook_id"=>"168381593830"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "168381593830"], ["LIMIT", 1]]
Unpermitted parameters: :facebook_id, :format
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at", "name", "pro_pic_url") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "1683815938304369"], ["session_token", "EAAY5MI6sEZCgBAKcH1aSmw8LTlaS8Tzevbqwxj0dZAKdCYdPKDXSUooGZCsClNqg2pKZCqBL1vn1PgVFfhnhd26v62pU6fvrZAxd4KvnU1LJoown9P1sqZAQugdqge5JL6hpkvWUABxL6ABrImwfgxN1LLS8ZCf8ZBm3VWGZBZB3cDUui6Hi0hL4cCU99kN0mC48VuZB8Ecjo15SgZDZD"], ["visible_radius", 5], ["created_at", "2017-09-17 01:46:50.828965"], ["updated_at", "2017-09-17 01:46:50.828965"], ["name", "Tommy Kilmer"], ["pro_pic_url", "http://graph.facebook.com/1683815938304369/picture"]]
  [1m[35m (2.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "10155757977328035"], ["LIMIT", 1]]
  Rendering api/users/show.json.jbuilder
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "friend_id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 14]]
  Rendered api/users/_user.json.jbuilder (2.2ms)
  Rendered api/users/show.json.jbuilder (3.1ms)
Completed 200 OK in 637ms (Views: 6.1ms | ActiveRecord: 3.5ms)


Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:47:00 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session_token"=>"EAAY5MI6sEZCgBAKcH1aSmw8LTlaS8Tzevbqwxj0dZAKdCYdPKDXSUooGZCsClNqg2pKZCqBL1vn1PgVFfhnhd26v62pU6fvrZAxd4KvnU1LJoown9P1sqZAQugdqge5JL6hpkvWUABxL6ABrImwfgxN1LLS8ZCf8ZBm3VWGZBZB3cDUui6Hi0hL4cCU99kN0mC48VuZB8Ecjo15SgZDZD", "facebook_id"=>"168381593830"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "168381593830"], ["LIMIT", 1]]
Unpermitted parameters: :facebook_id, :format
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:47:19 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at", "name", "pro_pic_url") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "1683815938304369"], ["session_token", "EAAY5MI6sEZCgBAKcH1aSmw8LTlaS8Tzevbqwxj0dZAKdCYdPKDXSUooGZCsClNqg2pKZCqBL1vn1PgVFfhnhd26v62pU6fvrZAxd4KvnU1LJoown9P1sqZAQugdqge5JL6hpkvWUABxL6ABrImwfgxN1LLS8ZCf8ZBm3VWGZBZB3cDUui6Hi0hL4cCU99kN0mC48VuZB8Ecjo15SgZDZD"], ["visible_radius", 5], ["created_at", "2017-09-17 01:47:19.881401"], ["updated_at", "2017-09-17 01:47:19.881401"], ["name", "Tommy Kilmer"], ["pro_pic_url", "http://graph.facebook.com/1683815938304369/picture"]]
  [1m[35m (2.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "10155757977328035"], ["LIMIT", 1]]
  Rendering api/users/show.json.jbuilder
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "friend_id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 15]]
  Rendered api/users/_user.json.jbuilder (7.9ms)
  Rendered api/users/show.json.jbuilder (8.8ms)
Completed 200 OK in 9881ms (Views: 12.8ms | ActiveRecord: 19.6ms)


Processing by Api::SessionsController#create as JSON
  Parameters: {"session"=>{}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:47:53 -0700
Unpermitted parameters: :format, :session
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session_token"=>"EAAY5MI6sEZCgBAKcH1aSmw8LTlaS8Tzevbqwxj0dZAKdCYdPKDXSUooGZCsClNqg2pKZCqBL1vn1PgVFfhnhd26v62pU6fvrZAxd4KvnU1LJoown9P1sqZAQugdqge5JL6hpkvWUABxL6ABrImwfgxN1LLS8ZCf8ZBm3VWGZBZB3cDUui6Hi0hL4cCU99kN0mC48VuZB8Ecjo15SgZDZD", "facebook_id"=>"168381593830"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "168381593830"], ["LIMIT", 1]]
Unpermitted parameters: :facebook_id, :format
Completed 500 Internal Server Error in 34417ms (ActiveRecord: 0.9ms)


  
Koala::Facebook::AuthenticationError (type: OAuthException, code: 2500, message: An active access token must be used to query information about the current user., x-fb-trace-id: BP0A8a1AwVn [HTTP 400]):
  
app/models/user.rb:9:in `fill_user_data'
app/controllers/api/sessions_controller.rb:17:in `make_user'
app/controllers/api/sessions_controller.rb:10:in `create'
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at", "name", "pro_pic_url") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "1683815938304369"], ["session_token", "EAAY5MI6sEZCgBAKcH1aSmw8LTlaS8Tzevbqwxj0dZAKdCYdPKDXSUooGZCsClNqg2pKZCqBL1vn1PgVFfhnhd26v62pU6fvrZAxd4KvnU1LJoown9P1sqZAQugdqge5JL6hpkvWUABxL6ABrImwfgxN1LLS8ZCf8ZBm3VWGZBZB3cDUui6Hi0hL4cCU99kN0mC48VuZB8Ecjo15SgZDZD"], ["visible_radius", 5], ["created_at", "2017-09-17 01:47:54.845768"], ["updated_at", "2017-09-17 01:47:54.845768"], ["name", "Tommy Kilmer"], ["pro_pic_url", "http://graph.facebook.com/1683815938304369/picture"]]
  [1m[35m (2.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "10155757977328035"], ["LIMIT", 1]]
  Rendering api/users/show.json.jbuilder
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "friend_id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 16]]
  Rendered api/users/_user.json.jbuilder (7.0ms)
  Rendered api/users/show.json.jbuilder (8.1ms)
Completed 200 OK in 1786ms (Views: 13.0ms | ActiveRecord: 4.3ms)


Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:47:59 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session_token"=>"EAAY5MI6sEZCgBAKcH1aSmw8LTlaS8Tzevbqwxj0dZAKdCYdPKDXSUooGZCsClNqg2pKZCqBL1vn1PgVFfhnhd26v62pU6fvrZAxd4KvnU1LJoown9P1sqZAQugdqge5JL6hpkvWUABxL6ABrImwfgxN1LLS8ZCf8ZBm3VWGZBZB3cDUui6Hi0hL4cCU99kN0mC48VuZB8Ecjo15SgZDZD", "facebook_id"=>"168381593830"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "168381593830"], ["LIMIT", 1]]
Unpermitted parameters: :facebook_id, :format
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at", "name", "pro_pic_url") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "1683815938304369"], ["session_token", "EAAY5MI6sEZCgBAKcH1aSmw8LTlaS8Tzevbqwxj0dZAKdCYdPKDXSUooGZCsClNqg2pKZCqBL1vn1PgVFfhnhd26v62pU6fvrZAxd4KvnU1LJoown9P1sqZAQugdqge5JL6hpkvWUABxL6ABrImwfgxN1LLS8ZCf8ZBm3VWGZBZB3cDUui6Hi0hL4cCU99kN0mC48VuZB8Ecjo15SgZDZD"], ["visible_radius", 5], ["created_at", "2017-09-17 01:47:59.593994"], ["updated_at", "2017-09-17 01:47:59.593994"], ["name", "Tommy Kilmer"], ["pro_pic_url", "http://graph.facebook.com/1683815938304369/picture"]]
  [1m[35m (2.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "10155757977328035"], ["LIMIT", 1]]
  Rendering api/users/show.json.jbuilder
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "friend_id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 17]]
  Rendered api/users/_user.json.jbuilder (1.8ms)
  Rendered api/users/show.json.jbuilder (2.6ms)
Completed 200 OK in 473ms (Views: 6.6ms | ActiveRecord: 3.3ms)


Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:48:04 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session_token"=>"EAAY5MI6sEZCgBAKcH1aSmw8LTlaS8Tzevbqwxj0dZAKdCYdPKDXSUooGZCsClNqg2pKZCqBL1vn1PgVFfhnhd26v62pU6fvrZAxd4KvnU1LJoown9P1sqZAQugdqge5JL6hpkvWUABxL6ABrImwfgxN1LLS8ZCf8ZBm3VWGZBZB3cDUui6Hi0hL4cCU99kN0mC48VuZB8Ecjo15SgZDZD", "facebook_id"=>"168381593830"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "168381593830"], ["LIMIT", 1]]
Unpermitted parameters: :facebook_id, :format
Unpermitted parameters: :facebook_id, :format
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at", "name", "pro_pic_url") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "1683815938304369"], ["session_token", "EAAY5MI6sEZCgBAKcH1aSmw8LTlaS8Tzevbqwxj0dZAKdCYdPKDXSUooGZCsClNqg2pKZCqBL1vn1PgVFfhnhd26v62pU6fvrZAxd4KvnU1LJoown9P1sqZAQugdqge5JL6hpkvWUABxL6ABrImwfgxN1LLS8ZCf8ZBm3VWGZBZB3cDUui6Hi0hL4cCU99kN0mC48VuZB8Ecjo15SgZDZD"], ["visible_radius", 5], ["created_at", "2017-09-17 01:49:53.718908"], ["updated_at", "2017-09-17 01:49:53.718908"], ["name", "Tommy Kilmer"], ["pro_pic_url", "http://graph.facebook.com/1683815938304369/picture"]]
  [1m[35m (1.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "10155757977328035"], ["LIMIT", 1]]
  Rendering api/users/show.json.jbuilder
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "friend_id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 18]]
  Rendered api/users/_user.json.jbuilder (2.1ms)
  Rendered api/users/show.json.jbuilder (3.3ms)
Completed 200 OK in 109299ms (Views: 9.3ms | ActiveRecord: 4.9ms)


Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:49:56 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session_token"=>"EAAY5MI6sEZCgBAKcH1aSmw8LTlaS8Tzevbqwxj0dZAKdCYdPKDXSUooGZCsClNqg2pKZCqBL1vn1PgVFfhnhd26v62pU6fvrZAxd4KvnU1LJoown9P1sqZAQugdqge5JL6hpkvWUABxL6ABrImwfgxN1LLS8ZCf8ZBm3VWGZBZB3cDUui6Hi0hL4cCU99kN0mC48VuZB8Ecjo15SgZDZD", "facebook_id"=>"1683815938304369"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "1683815938304369"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "1683815938304369"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "session_token" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["session_token", "EAAY5MI6sEZCgBAKcH1aSmw8LTlaS8Tzevbqwxj0dZAKdCYdPKDXSUooGZCsClNqg2pKZCqBL1vn1PgVFfhnhd26v62pU6fvrZAxd4KvnU1LJoown9P1sqZAQugdqge5JL6hpkvWUABxL6ABrImwfgxN1LLS8ZCf8ZBm3VWGZBZB3cDUui6Hi0hL4cCU99kN0mC48VuZB8Ecjo15SgZDZD"], ["updated_at", "2017-09-17 01:50:15.171364"], ["id", 6]]
  [1m[35m (0.7ms)[0m  [1m[36mcommit transaction[0m
No template found for Api::SessionsController#create, rendering head :no_content
Completed 204 No Content in 18687ms (ActiveRecord: 1.7ms)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "friendships"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "friendships" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "friend_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "locations"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "locations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "latitude" decimal(15,10), "longitude" decimal(15,10), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_latitude_and_longitude" ON "locations" ("latitude", "longitude")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_latitude" ON "locations" ("latitude")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_longitude" ON "locations" ("longitude")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "facebook_id" varchar NOT NULL, "session_token" varchar NOT NULL, "location_id" integer, "visible_radius" integer DEFAULT 10 NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "name" varchar, "pro_pic_url" varchar)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "index_users_on_facebook_id" ON "users" ("facebook_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_facebook_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_facebook_id' AND type='index'
[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX "index_users_on_location_id" ON "users" ("location_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_location_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_location_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_facebook_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_facebook_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_users_on_session_token" ON "users" ("session_token")[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "friendships"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "friendships" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "friend_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "locations"[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "locations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "latitude" decimal(15,10), "longitude" decimal(15,10), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_latitude_and_longitude" ON "locations" ("latitude", "longitude")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_latitude" ON "locations" ("latitude")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_locations_on_latitude_and_longitude' AND type='index'
[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_longitude" ON "locations" ("longitude")[0m
  [1m[35m (1.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "facebook_id" varchar NOT NULL, "session_token" varchar NOT NULL, "location_id" integer, "visible_radius" integer DEFAULT 10 NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "name" varchar, "pro_pic_url" varchar)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_users_on_facebook_id" ON "users" ("facebook_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_facebook_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_facebook_id' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_users_on_location_id" ON "users" ("location_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_location_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_location_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_facebook_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_facebook_id' AND type='index'
[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX "index_users_on_session_token" ON "users" ("session_token")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations"[0m
  [1m[36mFriendship Load (0.2ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships"[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:51:03 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::SessionsController#create as JSON
  Parameters: {"session"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Unpermitted parameters: :format, :session
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:52:38 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"session"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Unpermitted parameters: :format, :session
Completed 500 Internal Server Error in 95644ms (ActiveRecord: 1.2ms)


  
Koala::Facebook::AuthenticationError (type: OAuthException, code: 2500, message: An active access token must be used to query information about the current user., x-fb-trace-id: D0/d9ZyD+6u [HTTP 400]):
  
app/models/user.rb:9:in `fill_user_data'
app/controllers/api/sessions_controller.rb:17:in `make_user'
app/controllers/api/sessions_controller.rb:10:in `create'
Completed 500 Internal Server Error in 1084ms (ActiveRecord: 0.8ms)


  
Koala::Facebook::AuthenticationError (type: OAuthException, code: 2500, message: An active access token must be used to query information about the current user., x-fb-trace-id: BoSqCAIMoRn [HTTP 400]):
  
app/models/user.rb:9:in `fill_user_data'
app/controllers/api/sessions_controller.rb:17:in `make_user'
app/controllers/api/sessions_controller.rb:10:in `create'
Started POST "/api/session" for 67.169.71.210 at 2017-09-16 18:52:45 -0700
Cannot render console from 67.169.71.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Api::SessionsController#create as JSON
  Parameters: {"facebook_id"=>"10155757977328035", "session_token"=>"EAAY5MI6sEZCgBAKZAtZBO1yCxRw1Jnu2NJsMStRRuyIuFUY5Qs72gmZAzr1qM7Kszh1nwbtv2YUZBhoIe7ZBDZAuzZCodGr3SZAoOdCPwQzqzsPpYwGrgWdCoFBAzZB4JLgspZAaQjGtOe7Cz0tpUnzPzOn9sDce2ZBB0ZA0yuZAfkQy5qU84gPesTDK9L2UHTGiRjsCkEsohyL7UTvOkduN4XBZCKuLmAZAHQkZC6WFUNt08VQKfzYV6eigZBM6Y3sMK50NKxabkZD", "session"=>{"facebook_id"=>"10155757977328035", "session_token"=>"EAAY5MI6sEZCgBAKZAtZBO1yCxRw1Jnu2NJsMStRRuyIuFUY5Qs72gmZAzr1qM7Kszh1nwbtv2YUZBhoIe7ZBDZAuzZCodGr3SZAoOdCPwQzqzsPpYwGrgWdCoFBAzZB4JLgspZAaQjGtOe7Cz0tpUnzPzOn9sDce2ZBB0ZA0yuZAfkQy5qU84gPesTDK9L2UHTGiRjsCkEsohyL7UTvOkduN4XBZCKuLmAZAHQkZC6WFUNt08VQKfzYV6eigZBM6Y3sMK50NKxabkZD"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "10155757977328035"], ["LIMIT", 1]]
Unpermitted parameters: :facebook_id, :format, :session
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("facebook_id", "session_token", "visible_radius", "created_at", "updated_at", "name", "pro_pic_url") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["facebook_id", "10155757977328035"], ["session_token", "EAAY5MI6sEZCgBAKZAtZBO1yCxRw1Jnu2NJsMStRRuyIuFUY5Qs72gmZAzr1qM7Kszh1nwbtv2YUZBhoIe7ZBDZAuzZCodGr3SZAoOdCPwQzqzsPpYwGrgWdCoFBAzZB4JLgspZAaQjGtOe7Cz0tpUnzPzOn9sDce2ZBB0ZA0yuZAfkQy5qU84gPesTDK9L2UHTGiRjsCkEsohyL7UTvOkduN4XBZCKuLmAZAHQkZC6WFUNt08VQKfzYV6eigZBM6Y3sMK50NKxabkZD"], ["visible_radius", 5], ["created_at", "2017-09-17 01:52:47.955187"], ["updated_at", "2017-09-17 01:52:47.955187"], ["name", "Sachith Gullapalli"], ["pro_pic_url", "http://graph.facebook.com/10155757977328035/picture"]]
  [1m[35m (3.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."facebook_id" = ? LIMIT ?[0m  [["facebook_id", "1683815938304369"], ["LIMIT", 1]]
  Rendering api/users/show.json.jbuilder
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "friend_id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  Rendered api/users/_user.json.jbuilder (19.6ms)
  Rendered api/users/show.json.jbuilder (21.7ms)
Completed 200 OK in 3068ms (Views: 25.2ms | ActiveRecord: 4.8ms)


  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35m (1.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mLocation Load (0.1ms)[0m  [1m[34mSELECT "locations".* FROM "locations"[0m
  [1m[36mFriendship Load (0.1ms)[0m  [1m[34mSELECT "friendships".* FROM "friendships"[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "735 Minna"], ["latitude", 37.776521], ["longitude", -122.413125], ["created_at", "2017-09-17 01:57:16.926617"], ["updated_at", "2017-09-17 01:57:16.926617"]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "431 Tehma"], ["latitude", 37.78036], ["longitude", -122.405042], ["created_at", "2017-09-17 01:57:16.929501"], ["updated_at", "2017-09-17 01:57:16.929501"]]
  [1m[35m (1.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "locations" ("name", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "1600 Ampitheater Parkway"], ["latitude", 37.421655], ["longitude", -122.085637], ["created_at", "2017-09-17 01:57:16.933385"], ["updated_at", "2017-09-17 01:57:16.933385"]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mLocation Load (1.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations"[0m
  [1m[36mLocation Load (0.3ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mLocation Load (0.1ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
